<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":true,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: true,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="&amp;#x6982;&amp;#x5FF5;MySQL&amp;#x7684;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#xFF0C;&amp;#x5168;&amp;#x540D;&amp;#x662F;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#x65E5;&amp;#x5FD7;&amp;#xFF0C;&amp;#x662F;MySQL&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x65E5;&amp;#x5FD">
<meta name="keywords" content="mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql慢查询">
<meta property="og:url" content="http://blogs.cszhi.com/2014/02/21/mysql慢查询/index.html">
<meta property="og:site_name" content="csz&#39;s blog">
<meta property="og:description" content="&amp;#x6982;&amp;#x5FF5;MySQL&amp;#x7684;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#xFF0C;&amp;#x5168;&amp;#x540D;&amp;#x662F;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#x65E5;&amp;#x5FD7;&amp;#xFF0C;&amp;#x662F;MySQL&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x65E5;&amp;#x5FD">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2014-02-20T16:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql慢查询">
<meta name="twitter:description" content="&amp;#x6982;&amp;#x5FF5;MySQL&amp;#x7684;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#xFF0C;&amp;#x5168;&amp;#x540D;&amp;#x662F;&amp;#x6162;&amp;#x67E5;&amp;#x8BE2;&amp;#x65E5;&amp;#x5FD7;&amp;#xFF0C;&amp;#x662F;MySQL&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x4E00;&amp;#x79CD;&amp;#x65E5;&amp;#x5FD">
  <link rel="canonical" href="http://blogs.cszhi.com/2014/02/21/mysql慢查询/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>mysql慢查询 | csz's blog</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">
  <div class="container">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">csz's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger">
        
          <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
      </li>
    
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="搜索..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://blogs.cszhi.com/2014/02/21/mysql慢查询/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="csz">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="csz's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">mysql慢查询

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2014-02-21 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-21T00:00:00+08:00">2014-02-21</time>
            </span>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/运维/" itemprop="url" rel="index"><span itemprop="name">运维</span></a></span>

                
                
              
            </span>
          

          
            <span class="post-meta-item" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span>2:30</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="&#x6982;&#x5FF5;"><a href="#&#x6982;&#x5FF5;" class="headerlink" title="&#x6982;&#x5FF5;"></a>&#x6982;&#x5FF5;</h3><p>MySQL&#x7684;&#x6162;&#x67E5;&#x8BE2;&#xFF0C;&#x5168;&#x540D;&#x662F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;&#x662F;MySQL&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x79CD;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#xFF0C;&#x7528;&#x6765;&#x8BB0;&#x5F55;&#x5728;MySQL&#x4E2D;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x9600;&#x503C;&#x7684;&#x8BED;&#x53E5;&#x3002;<br>&#x5177;&#x4F53;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;long_query_time&#x503C;&#x7684;SQL&#x8BED;&#x53E5;&#xFF0C;&#x5219;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x4E2D;&#x3002;<br>long_query_time&#x7684;&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;10&#xFF0C;&#x610F;&#x601D;&#x662F;&#x8BB0;&#x5F55;&#x8FD0;&#x884C;10&#x79D2;&#x4EE5;&#x4E0A;&#x7684;&#x8BED;&#x53E5;&#x3002;<br>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MySQL&#x6570;&#x636E;&#x5E93;&#x5E76;&#x4E0D;&#x542F;&#x52A8;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;&#x9700;&#x8981;&#x624B;&#x52A8;&#x6765;&#x8BBE;&#x7F6E;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x3002;<br>&#x5F53;&#x7136;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x8C03;&#x4F18;&#x9700;&#x8981;&#x7684;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x5EFA;&#x8BAE;&#x542F;&#x52A8;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x5F00;&#x542F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x4F1A;&#x6216;&#x591A;&#x6216;&#x5C11;&#x5E26;&#x6765;&#x4E00;&#x5B9A;&#x7684;&#x6027;&#x80FD;&#x5F71;&#x54CD;&#x3002;<br>&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x652F;&#x6301;&#x5C06;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5199;&#x5165;&#x6587;&#x4EF6;&#x548C;&#x6570;&#x636E;&#x5E93;&#x8868;&#x3002;</p>
<a id="more"></a>

<h3 id="&#x53C2;&#x6570;"><a href="#&#x53C2;&#x6570;" class="headerlink" title="&#x53C2;&#x6570;"></a>&#x53C2;&#x6570;</h3><p>MySQL &#x6162;&#x67E5;&#x8BE2;&#x7684;&#x76F8;&#x5173;&#x53C2;&#x6570;&#x89E3;&#x91CA;&#xFF1A;</p>
<ul>
<li>slow_query_log&#xFF1A;&#x662F;&#x5426;&#x5F00;&#x542F;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;1&#x8868;&#x793A;&#x5F00;&#x542F;&#xFF0C;0&#x8868;&#x793A;&#x5173;&#x95ED;&#x3002;</li>
<li>log-slow-queries &#xFF1A;&#x65E7;&#x7248;&#xFF08;5.6&#x4EE5;&#x4E0B;&#x7248;&#x672C;&#xFF09;MySQL&#x6570;&#x636E;&#x5E93;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#x3002;&#x53EF;&#x4EE5;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x7CFB;&#x7EDF;&#x5219;&#x4F1A;&#x9ED8;&#x8BA4;&#x7ED9;&#x4E00;&#x4E2A;&#x7F3A;&#x7701;&#x7684;&#x6587;&#x4EF6;host_name-slow.log</li>
<li>slow-query-log-file&#xFF1A;&#x65B0;&#x7248;&#xFF08;5.6&#x53CA;&#x4EE5;&#x4E0A;&#x7248;&#x672C;&#xFF09;MySQL&#x6570;&#x636E;&#x5E93;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x5B58;&#x50A8;&#x8DEF;&#x5F84;&#x3002;&#x53EF;&#x4EE5;&#x4E0D;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#xFF0C;&#x7CFB;&#x7EDF;&#x5219;&#x4F1A;&#x9ED8;&#x8BA4;&#x7ED9;&#x4E00;&#x4E2A;&#x7F3A;&#x7701;&#x7684;&#x6587;&#x4EF6;host_name-slow.log</li>
<li>long_query_time&#xFF1A;&#x6162;&#x67E5;&#x8BE2;&#x9608;&#x503C;&#xFF0C;&#x5F53;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#x591A;&#x4E8E;&#x8BBE;&#x5B9A;&#x7684;&#x9608;&#x503C;&#x65F6;&#xFF0C;&#x8BB0;&#x5F55;&#x65E5;&#x5FD7;&#x3002;</li>
<li>log_queries_not_using_indexes&#xFF1A;&#x672A;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;&#x4E5F;&#x88AB;&#x8BB0;&#x5F55;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x4E2D;&#xFF08;&#x53EF;&#x9009;&#x9879;&#xFF09;&#x3002;</li>
<li>log_output&#xFF1A;&#x65E5;&#x5FD7;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#x3002;log_output=&#x2019;FILE&#x2019;&#x8868;&#x793A;&#x5C06;&#x65E5;&#x5FD7;&#x5B58;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x662F;&#x2019;FILE&#x2019;&#x3002;log_output=&#x2019;TABLE&#x2019;&#x8868;&#x793A;&#x5C06;&#x65E5;&#x5FD7;&#x5B58;&#x5165;&#x6570;&#x636E;&#x5E93;&#x3002;</li>
</ul>
<h3 id="&#x914D;&#x7F6E;"><a href="#&#x914D;&#x7F6E;" class="headerlink" title="&#x914D;&#x7F6E;"></a>&#x914D;&#x7F6E;</h3><h4 id="slow-query-log"><a href="#slow-query-log" class="headerlink" title="slow_query_log"></a>slow_query_log</h4><p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;slow_query_log&#x7684;&#x503C;&#x4E3A;OFF&#xFF0C;&#x8868;&#x793A;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x662F;&#x7981;&#x7528;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;slow_query_log&#x7684;&#x503C;&#x6765;&#x5F00;&#x542F;&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables  like &apos;%slow_query_log%&apos;;</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> | Variable_name       | Value                                         |</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> | slow_query_log      | OFF                                           |</span><br><span class="line"> | slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> 2 rows in set (0.00 sec)</span><br><span class="line">mysql&gt; set global slow_query_log=1;</span><br><span class="line"> Query OK, 0 rows affected (0.09 sec)</span><br></pre></td></tr></table></figure>

<p>&#x4F7F;&#x7528;set global slow_query_log=1&#x5F00;&#x542F;&#x4E86;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x53EA;&#x5BF9;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x751F;&#x6548;&#xFF0C;MySQL&#x91CD;&#x542F;&#x540E;&#x5219;&#x4F1A;&#x5931;&#x6548;&#x3002;<br>&#x5982;&#x679C;&#x8981;&#x6C38;&#x4E45;&#x751F;&#x6548;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;my.cnf&#xFF08;&#x5176;&#x5B83;&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF09;&#x3002;<br>my.cnf&#x8981;&#x589E;&#x52A0;&#x6216;&#x4FEE;&#x6539;&#x53C2;&#x6570;slow_query_log &#x548C;slow_query_log_file&#xFF0C;&#x5982;&#x4E0B;&#x6240;&#x793A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">slow_query_log = 1</span><br><span class="line">slow_query_log_file = /tmp/mysql_slow.log</span><br></pre></td></tr></table></figure>

<p>&#x7136;&#x540E;&#x91CD;&#x542F;MySQL&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<h4 id="slow-query-log-file"><a href="#slow-query-log-file" class="headerlink" title="slow_query_log_file"></a>slow_query_log_file</h4><p>&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x7684;&#x5B58;&#x653E;&#x8DEF;&#x5F84;&#xFF0C;&#x7F3A;&#x7701;&#x60C5;&#x51B5;&#x662F;host_name-slow.log&#x6587;&#x4EF6;&#xFF0C;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;slow_query_log_file&apos;;</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> | Variable_name       | Value                                         |</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> | slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |</span><br><span class="line"> +---------------------+-----------------------------------------------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="long-query-time"><a href="#long-query-time" class="headerlink" title="long_query_time"></a>long_query_time</h4><p>&#x5F00;&#x542F;&#x4E86;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x540E;&#xFF0C;&#x4EC0;&#x4E48;&#x6837;&#x7684;SQL&#x624D;&#x4F1A;&#x8BB0;&#x5F55;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x91CC;&#x9762;&#x5462;&#xFF1F;<br>&#x8FD9;&#x4E2A;&#x662F;&#x7531;&#x53C2;&#x6570;long_query_time&#x63A7;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;long_query_time&#x7684;&#x503C;&#x4E3A;10&#x79D2;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x4FEE;&#x6539;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;my.cnf&#x53C2;&#x6570;&#x91CC;&#x9762;&#x4FEE;&#x6539;&#x3002;<br>&#x5173;&#x4E8E;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x6B63;&#x597D;&#x7B49;&#x4E8E;long_query_time&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5E76;&#x4E0D;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;&#x3002;<br>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5728;mysql&#x6E90;&#x7801;&#x91CC;&#x662F;&#x5224;&#x65AD;&#x5927;&#x4E8E;long_query_time&#xFF0C;&#x800C;&#x975E;&#x5927;&#x4E8E;&#x7B49;&#x4E8E;&#x3002;<br>&#x4ECE;MySQL 5.1&#x5F00;&#x59CB;&#xFF0C;long_query_time&#x5F00;&#x59CB;&#x4EE5;&#x5FAE;&#x79D2;&#x8BB0;&#x5F55;SQL&#x8BED;&#x53E5;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#xFF0C;&#x4E4B;&#x524D;&#x4EC5;&#x7528;&#x79D2;&#x4E3A;&#x5355;&#x4F4D;&#x8BB0;&#x5F55;&#x3002;<br>&#x5982;&#x679C;&#x8BB0;&#x5F55;&#x5230;&#x8868;&#x91CC;&#x9762;&#xFF0C;&#x53EA;&#x4F1A;&#x8BB0;&#x5F55;&#x6574;&#x6570;&#x90E8;&#x5206;&#xFF0C;&#x4E0D;&#x4F1A;&#x8BB0;&#x5F55;&#x5FAE;&#x79D2;&#x90E8;&#x5206;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;long_query_time%&apos;;</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> | Variable_name   | Value     |</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> | long_query_time | 10.000000 |</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set global long_query_time=4;</span><br><span class="line"> Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &apos;long_query_time&apos;;</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> | Variable_name   | Value     |</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> | long_query_time | 10.000000 |</span><br><span class="line"> +-----------------+-----------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>&#x5982;&#x4E0A;&#x6240;&#x793A;&#xFF0C;&#x6211;&#x4FEE;&#x6539;&#x4E86;&#x53D8;&#x91CF;long_query_time&#xFF0C;&#x4F46;&#x662F;&#x67E5;&#x8BE2;&#x53D8;&#x91CF;long_query_time&#x7684;&#x503C;&#x8FD8;&#x662F;10&#xFF0C;&#x96BE;&#x9053;&#x6CA1;&#x6709;&#x4FEE;&#x6539;&#x5230;&#x5462;&#xFF1F;<br>&#x6CE8;&#x610F;&#xFF1A;&#x4F7F;&#x7528;&#x547D;&#x4EE4; set global long_query_time=4&#x4FEE;&#x6539;&#x540E;&#xFF0C;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x6216;&#x65B0;&#x5F00;&#x4E00;&#x4E2A;&#x4F1A;&#x8BDD;&#x624D;&#x80FD;&#x770B;&#x5230;&#x4FEE;&#x6539;&#x503C;&#x3002;<br>&#x7528;show variables like &#x2018;long_query_time&#x2019;&#x67E5;&#x770B;&#x662F;&#x5F53;&#x524D;&#x4F1A;&#x8BDD;&#x7684;&#x53D8;&#x91CF;&#x503C;&#x3002;<br>&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;&#x4F1A;&#x8BDD;&#xFF0C;&#x800C;&#x662F;&#x7528;show global variables like &#x2018;long_query_time&#x2019;;&#x3002;</p>
<h4 id="log-output"><a href="#log-output" class="headerlink" title="log_output"></a>log_output</h4><p>log_output&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#x3002;<br>log_output=&#x2019;FILE&#x2019;&#x8868;&#x793A;&#x5C06;&#x65E5;&#x5FD7;&#x5B58;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x9ED8;&#x8BA4;&#x503C;&#x4E5F;&#x662F;&#x2019;FILE&#x2019;&#x3002;<br>log_output=&#x2019;TABLE&#x2019;&#x8868;&#x793A;&#x5C06;&#x65E5;&#x5FD7;&#x5B58;&#x5165;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8FD9;&#x6837;&#x65E5;&#x5FD7;&#x4FE1;&#x606F;&#x5C31;&#x4F1A;&#x88AB;&#x5199;&#x5165;&#x5230;mysql.slow_log&#x8868;&#x4E2D;&#x3002;<br>&#x540C;&#x65F6;&#x4E5F;&#x652F;&#x6301;&#x4E24;&#x79CD;&#x65E5;&#x5FD7;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x914D;&#x7F6E;&#x7684;&#x65F6;&#x5019;&#x4EE5;&#x9017;&#x53F7;&#x9694;&#x5F00;&#x5373;&#x53EF;&#xFF0C;&#x5982;&#xFF1A;log_output=&#x2019;FILE,TABLE&#x2019;&#x3002;<br>&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x5230;&#x7CFB;&#x7EDF;&#x7684;&#x4E13;&#x7528;&#x65E5;&#x5FD7;&#x8868;&#x4E2D;&#xFF0C;&#x8981;&#x6BD4;&#x8BB0;&#x5F55;&#x5230;&#x6587;&#x4EF6;&#x8017;&#x8D39;&#x66F4;&#x591A;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x3002;<br>&#x56E0;&#x6B64;&#x5BF9;&#x4E8E;&#x9700;&#x8981;&#x542F;&#x7528;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#xFF0C;&#x53C8;&#x9700;&#x8981;&#x80FD;&#x591F;&#x83B7;&#x5F97;&#x66F4;&#x9AD8;&#x7684;&#x7CFB;&#x7EDF;&#x6027;&#x80FD;&#xFF0C;&#x90A3;&#x4E48;&#x5EFA;&#x8BAE;&#x4F18;&#x5148;&#x8BB0;&#x5F55;&#x5230;&#x6587;&#x4EF6;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;%log_output%&apos;;</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | Variable_name | Value |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | log_output    | FILE  |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set global log_output=&apos;TABLE&apos;;</span><br><span class="line"> Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &apos;%log_output%&apos;;</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | Variable_name | Value |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | log_output    | TABLE |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select sleep(5) ;</span><br><span class="line"> +----------+</span><br><span class="line"> | sleep(5) |</span><br><span class="line"> +----------+</span><br><span class="line"> |        0 |</span><br><span class="line"> +----------+</span><br><span class="line"> 1 row in set (5.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from mysql.slow_log;</span><br><span class="line"> +---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+</span><br><span class="line"> | start_time          | user_host                 | query_time | lock_time | rows_sent | rows_examined | db | last_insert_id | insert_id | server_id | sql_text        | thread_id |</span><br><span class="line"> +---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+</span><br><span class="line"> | 2016-06-16 17:37:53 | root[root] @ localhost [] | 00:00:03   | 00:00:00  |         1 |             0 |    |              0 |         0 |         1 | select sleep(3) |         5 |</span><br><span class="line"> | 2016-06-16 21:45:23 | root[root] @ localhost [] | 00:00:05   | 00:00:00  |         1 |             0 |    |              0 |         0 |         1 | select sleep(5) |         2 |</span><br><span class="line"> +---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+</span><br><span class="line"> 2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="log-queries-not-using-indexes"><a href="#log-queries-not-using-indexes" class="headerlink" title="log-queries-not-using-indexes"></a>log-queries-not-using-indexes</h4><p>&#x8BE5;&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#x6307;&#x5B9A;&#x672A;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x7684;&#x67E5;&#x8BE2;&#x4E5F;&#x88AB;&#x8BB0;&#x5F55;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x4E2D;&#xFF08;&#x53EF;&#x9009;&#x9879;&#xFF09;&#x3002;<br>&#x5982;&#x679C;&#x8C03;&#x4F18;&#x7684;&#x8BDD;&#xFF0C;&#x5EFA;&#x8BAE;&#x5F00;&#x542F;&#x8FD9;&#x4E2A;&#x9009;&#x9879;&#x3002;<br>&#x53E6;&#x5916;&#xFF0C;&#x5F00;&#x542F;&#x4E86;&#x8FD9;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x5176;&#x5B9E;&#x4F7F;&#x7528;full index scan&#x7684;SQL&#x4E5F;&#x4F1A;&#x88AB;&#x8BB0;&#x5F55;&#x5230;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;log_queries_not_using_indexes&apos;;</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> | Variable_name                 | Value |</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> | log_queries_not_using_indexes | OFF   |</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; set global log_queries_not_using_indexes=1;</span><br><span class="line"> Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &apos;log_queries_not_using_indexes&apos;;</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> | Variable_name                 | Value |</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> | log_queries_not_using_indexes | ON    |</span><br><span class="line"> +-------------------------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="log-slow-admin-statements"><a href="#log-slow-admin-statements" class="headerlink" title="log_slow_admin_statements"></a>log_slow_admin_statements</h4><p>&#x8FD9;&#x4E2A;&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#x8868;&#x793A;&#xFF0C;&#x662F;&#x5426;&#x5C06;&#x6162;&#x7BA1;&#x7406;&#x8BED;&#x53E5;&#x4F8B;&#x5982;ANALYZE TABLE&#x548C;ALTER TABLE&#x7B49;&#x8BB0;&#x5165;&#x6162;&#x67E5;&#x8BE2;&#x65E5;&#x5FD7;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;log_slow_admin_statements&apos;;</span><br><span class="line"> +---------------------------+-------+</span><br><span class="line"> | Variable_name             | Value |</span><br><span class="line"> +---------------------------+-------+</span><br><span class="line"> | log_slow_admin_statements | OFF   |</span><br><span class="line"> +---------------------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="Slow-queries"><a href="#Slow-queries" class="headerlink" title="Slow_queries"></a>Slow_queries</h4><p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x67E5;&#x8BE2;&#x6709;&#x591A;&#x5C11;&#x6761;&#x6162;&#x67E5;&#x8BE2;&#x8BB0;&#x5F55;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Slow_queries&#x7CFB;&#x7EDF;&#x53D8;&#x91CF;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;%Slow_queries%&apos;;</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | Variable_name | Value |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> | Slow_queries  | 2104  |</span><br><span class="line"> +---------------+-------+</span><br><span class="line"> 1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>&#x53E6;&#x5916;&#xFF0C;&#x8FD8;&#x6709;log_slow_slave_statements &#x548C; &#x2013;log-short-format &#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x5230;MySQL&#x7F51;&#x7AD9;&#x4E86;&#x89E3;&#x3002;</p>
<h3 id="mysqldumpslow&#x5DE5;&#x5177;"><a href="#mysqldumpslow&#x5DE5;&#x5177;" class="headerlink" title="mysqldumpslow&#x5DE5;&#x5177;"></a>mysqldumpslow&#x5DE5;&#x5177;</h3><p>&#x5728;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x8981;&#x624B;&#x5DE5;&#x5206;&#x6790;&#x65E5;&#x5FD7;&#xFF0C;&#x67E5;&#x627E;&#x3001;&#x5206;&#x6790;SQL&#xFF0C;&#x663E;&#x7136;&#x662F;&#x4E2A;&#x4F53;&#x529B;&#x6D3B;&#x3002;<br>MySQL&#x63D0;&#x4F9B;&#x4E86;&#x65E5;&#x5FD7;&#x5206;&#x6790;&#x5DE5;&#x5177;mysqldumpslow<br>&#x67E5;&#x770B;mysqldumpslow&#x7684;&#x5E2E;&#x52A9;&#x4FE1;&#x606F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysqldumpslow --help</span><br><span class="line"> Usage: mysqldumpslow [ OPTS... ] [ LOGS... ]</span><br><span class="line">Parse and summarize the MySQL slow query log. Options are</span><br><span class="line"></span><br><span class="line">  --verbose    verbose</span><br><span class="line">  --debug      debug</span><br><span class="line">  --help       write this text to standard output</span><br><span class="line"></span><br><span class="line">  -v           verbose</span><br><span class="line">  -d           debug</span><br><span class="line">  -s ORDER     what to sort by (al, at, ar, c, l, r, t), &apos;at&apos; is default&#xFF08;&#x6392;&#x5E8F;&#x65B9;&#x5F0F;&#xFF09;</span><br><span class="line">                 al: average lock time&#xFF08;&#x5E73;&#x5747;&#x9501;&#x5B9A;&#x65F6;&#x95F4;&#xFF09;</span><br><span class="line">                 ar: average rows sent&#xFF08;&#x5E73;&#x5747;&#x8FD4;&#x56DE;&#x8BB0;&#x5F55;&#x6570;&#xFF09;</span><br><span class="line">                 at: average query time&#xFF08;&#x5E73;&#x5747;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#xFF09;</span><br><span class="line">                  c: count&#xFF08;&#x8BBF;&#x95EE;&#x8BA1;&#x6570;&#xFF09;</span><br><span class="line">                  l: lock time&#xFF08;&#x9501;&#x5B9A;&#x65F6;&#x95F4;&#xFF09;</span><br><span class="line">                  r: rows sent&#xFF08;&#x8FD4;&#x56DE;&#x8BB0;&#x5F55;&#xFF09;</span><br><span class="line">                  t: query time&#xFF08;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#xFF09;</span><br><span class="line">   -r           reverse the sort order (largest last instead of first)</span><br><span class="line">   -t NUM       just show the top n queries&#xFF08;&#x8FD4;&#x56DE;&#x524D;&#x9762;n&#x6761;&#x6570;&#x636E;&#xFF09;</span><br><span class="line">   -a           don&apos;t abstract all numbers to N and strings to &apos;S&apos;</span><br><span class="line">   -n NUM       abstract numbers with at least n digits within names</span><br><span class="line">   -g PATTERN   grep: only consider stmts that include this string&#xFF08;&#x6B63;&#x5219;&#x5339;&#x914D;&#x6A21;&#x5F0F;&#xFF0C;&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;&#xFF09;</span><br><span class="line">   -h HOSTNAME  hostname of db server for *-slow.log filename (can be wildcard),</span><br><span class="line">                default is &apos;*&apos;, i.e. match all</span><br><span class="line">   -i NAME      name of server instance (if using mysql.server startup script)</span><br><span class="line">   -l           don&apos;t subtract lock time from total time</span><br></pre></td></tr></table></figure>

<p>&#x6BD4;&#x5982;&#xFF0C;&#x5F97;&#x5230;&#x8FD4;&#x56DE;&#x8BB0;&#x5F55;&#x96C6;&#x6700;&#x591A;&#x7684;10&#x4E2A;SQL&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s r -t 10 /database/mysql/node1.log</span><br></pre></td></tr></table></figure>

<p>&#x5F97;&#x5230;&#x8BBF;&#x95EE;&#x6B21;&#x6570;&#x6700;&#x591A;&#x7684;10&#x4E2A;SQL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s c -t 10 /database/mysql/node1.log</span><br></pre></td></tr></table></figure>

<p>&#x5F97;&#x5230;&#x6309;&#x7167;&#x65F6;&#x95F4;&#x6392;&#x5E8F;&#x7684;&#x524D;10&#x6761;&#x91CC;&#x9762;&#x542B;&#x6709;&#x5DE6;&#x8FDE;&#x63A5;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s t -t 10 -g &#x201C;left join&#x201D; /database/mysql/node1.log</span><br></pre></td></tr></table></figure>

<p>&#x53E6;&#x5916;&#x5EFA;&#x8BAE;&#x5728;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x65F6;&#x7ED3;&#x5408; | &#x548C;more &#x4F7F;&#x7528; &#xFF0C;&#x5426;&#x5219;&#x6709;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5237;&#x5C4F;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldumpslow -s r -t 20 /mysqldata/mysql/node1.log | more</span><br></pre></td></tr></table></figure>

<h3 id="EXPLAIN&#x5206;&#x6790;&#x67E5;&#x8BE2;"><a href="#EXPLAIN&#x5206;&#x6790;&#x67E5;&#x8BE2;" class="headerlink" title="EXPLAIN&#x5206;&#x6790;&#x67E5;&#x8BE2;"></a><strong>EXPLAIN&#x5206;&#x6790;&#x67E5;&#x8BE2;</strong></h3><p>&#x4F7F;&#x7528; EXPLAIN &#x5173;&#x952E;&#x5B57;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;&#x4F18;&#x5316;&#x5668;&#x6267;&#x884C;SQL&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#xFF0C;&#x4ECE;&#x800C;&#x77E5;&#x9053;MySQL&#x662F;&#x5982;&#x4F55;&#x5904;&#x7406;&#x4F60;&#x7684;SQL&#x8BED;&#x53E5;&#x7684;&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x5E2E;&#x4F60;&#x5206;&#x6790;&#x4F60;&#x7684;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;&#x6216;&#x662F;&#x8868;&#x7ED3;&#x6784;&#x7684;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x3002;&#x901A;&#x8FC7;explain&#x547D;&#x4EE4;&#x53EF;&#x4EE5;&#x5F97;&#x5230;:</p>
<ul>
<li>&#x8868;&#x7684;&#x8BFB;&#x53D6;&#x987A;&#x5E8F;</li>
<li>&#x6570;&#x636E;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x7684;&#x64CD;&#x4F5C;&#x7C7B;&#x578B;</li>
<li>&#x54EA;&#x4E9B;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;</li>
<li>&#x54EA;&#x4E9B;&#x7D22;&#x5F15;&#x88AB;&#x5B9E;&#x9645;&#x4F7F;&#x7528;</li>
<li>&#x8868;&#x4E4B;&#x95F4;&#x7684;&#x5F15;&#x7528;</li>
<li>&#x6BCF;&#x5F20;&#x8868;&#x6709;&#x591A;&#x5C11;&#x884C;&#x88AB;&#x4F18;&#x5316;&#x5668;&#x67E5;&#x8BE2;</li>
</ul>
<h4 id="EXPLAIN&#x5B57;&#x6BB5;"><a href="#EXPLAIN&#x5B57;&#x6BB5;" class="headerlink" title="EXPLAIN&#x5B57;&#x6BB5;"></a>EXPLAIN&#x5B57;&#x6BB5;</h4><ul>
<li><p>Table&#xFF1A;&#x663E;&#x793A;&#x8FD9;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;&#x662F;&#x5173;&#x4E8E;&#x54EA;&#x5F20;&#x8868;&#x7684;</p>
</li>
<li><p>possible_keys&#xFF1A;&#x663E;&#x793A;&#x53EF;&#x80FD;&#x5E94;&#x7528;&#x5728;&#x8FD9;&#x5F20;&#x8868;&#x4E2D;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x5982;&#x679C;&#x4E3A;&#x7A7A;&#xFF0C;&#x6CA1;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x53EF;&#x4EE5;&#x4E3A;&#x76F8;&#x5173;&#x7684;&#x57DF;&#x4ECE;WHERE&#x8BED;&#x53E5;&#x4E2D;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5408;&#x9002;&#x7684;&#x8BED;&#x53E5;</p>
</li>
<li><p>key&#xFF1A;&#x5B9E;&#x9645;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x5982;&#x679C;&#x4E3A;NULL&#xFF0C;&#x5219;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x3002;MYSQL&#x5F88;&#x5C11;&#x4F1A;&#x9009;&#x62E9;&#x4F18;&#x5316;&#x4E0D;&#x8DB3;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x6B64;&#x65F6;&#x53EF;&#x4EE5;&#x5728;SELECT&#x8BED;&#x53E5;&#x4E2D;&#x4F7F;&#x7528;USE INDEX&#xFF08;index&#xFF09;&#x6765;&#x5F3A;&#x5236;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x6216;&#x8005;&#x7528;IGNORE INDEX&#xFF08;index&#xFF09;&#x6765;&#x5F3A;&#x5236;&#x5FFD;&#x7565;&#x7D22;&#x5F15;</p>
</li>
<li><p>key_len&#xFF1A;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x5728;&#x4E0D;&#x635F;&#x5931;&#x7CBE;&#x786E;&#x6027;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x957F;&#x5EA6;&#x8D8A;&#x77ED;&#x8D8A;&#x597D;</p>
</li>
<li><p>ref&#xFF1A;&#x663E;&#x793A;&#x7D22;&#x5F15;&#x7684;&#x54EA;&#x4E00;&#x5217;&#x88AB;&#x4F7F;&#x7528;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x53EF;&#x80FD;&#x7684;&#x8BDD;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x5E38;&#x6570;</p>
</li>
<li><p>rows&#xFF1A;MySQL&#x8BA4;&#x4E3A;&#x5FC5;&#x987B;&#x68C0;&#x7D22;&#x7684;&#x7528;&#x6765;&#x8FD4;&#x56DE;&#x8BF7;&#x6C42;&#x6570;&#x636E;&#x7684;&#x884C;&#x6570;</p>
</li>
<li><p>type&#xFF1A;&#x8FD9;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5B57;&#x6BB5;&#x4E4B;&#x4E00;&#xFF0C;&#x663E;&#x793A;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x4E86;&#x4F55;&#x79CD;&#x7C7B;&#x578B;&#x3002;&#x4ECE;&#x6700;&#x597D;&#x5230;&#x6700;&#x5DEE;&#x7684;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;&#x4E3A;system&#x3001;const&#x3001;eq_reg&#x3001;ref&#x3001;range&#x3001;index&#x548C;ALL</p>
<pre><code>system&#x3001;const&#xFF1A;&#x53EF;&#x4EE5;&#x5C06;&#x67E5;&#x8BE2;&#x7684;&#x53D8;&#x91CF;&#x8F6C;&#x4E3A;&#x5E38;&#x91CF;.  &#x5982;id=1; id&#x4E3A; &#x4E3B;&#x952E;&#x6216;&#x552F;&#x4E00;&#x952E;.
eq_ref&#xFF1A;&#x8BBF;&#x95EE;&#x7D22;&#x5F15;,&#x8FD4;&#x56DE;&#x67D0;&#x5355;&#x4E00;&#x884C;&#x7684;&#x6570;&#x636E;.(&#x901A;&#x5E38;&#x5728;&#x8054;&#x63A5;&#x65F6;&#x51FA;&#x73B0;&#xFF0C;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x4E3A;&#x4E3B;&#x952E;&#x6216;&#x60DF;&#x4E00;&#x952E;)
ref&#xFF1A;&#x8BBF;&#x95EE;&#x7D22;&#x5F15;,&#x8FD4;&#x56DE;&#x67D0;&#x4E2A;&#x503C;&#x7684;&#x6570;&#x636E;.(&#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x591A;&#x884C;) &#x901A;&#x5E38;&#x4F7F;&#x7528;=&#x65F6;&#x53D1;&#x751F;
range&#xFF1A;&#x8FD9;&#x4E2A;&#x8FDE;&#x63A5;&#x7C7B;&#x578B;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x4E2D;&#x7684;&#x884C;&#xFF0C;&#x6BD4;&#x5982;&#x4F7F;&#x7528;&gt;&#x6216;&lt;&#x67E5;&#x627E;&#x4E1C;&#x897F;&#xFF0C;&#x5E76;&#x4E14;&#x8BE5;&#x5B57;&#x6BB5;&#x4E0A;&#x5EFA;&#x6709;&#x7D22;&#x5F15;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x60C5;&#x51B5;(&#x6CE8;:&#x4E0D;&#x4E00;&#x5B9A;&#x597D;&#x4E8E;index)
index&#xFF1A;&#x4EE5;&#x7D22;&#x5F15;&#x7684;&#x987A;&#x5E8F;&#x8FDB;&#x884C;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x4F18;&#x70B9;&#x662F;&#x4E0D;&#x7528;&#x6392;&#x5E8F;,&#x7F3A;&#x70B9;&#x662F;&#x8FD8;&#x8981;&#x5168;&#x8868;&#x626B;&#x63CF;
ALL&#xFF1A;&#x5168;&#x8868;&#x626B;&#x63CF;&#xFF0C;&#x5E94;&#x8BE5;&#x5C3D;&#x91CF;&#x907F;&#x514D;</code></pre></li>
<li><p>Extra&#xFF1A;&#x5173;&#x4E8E;MYSQL&#x5982;&#x4F55;&#x89E3;&#x6790;&#x67E5;&#x8BE2;&#x7684;&#x989D;&#x5916;&#x4FE1;&#x606F;&#xFF0C;&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;&#x51E0;&#x79CD;</p>
<pre><code>using index&#xFF1A;&#x53EA;&#x7528;&#x5230;&#x7D22;&#x5F15;,&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x8BBF;&#x95EE;&#x8868;.
using where&#xFF1A;&#x4F7F;&#x7528;&#x5230;where&#x6765;&#x8FC7;&#x8651;&#x6570;&#x636E;. &#x4E0D;&#x662F;&#x6240;&#x6709;&#x7684;where clause&#x90FD;&#x8981;&#x663E;&#x793A;using where. &#x5982;&#x4EE5;=&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#x7D22;&#x5F15;.
using tmporary&#xFF1A;&#x7528;&#x5230;&#x4E34;&#x65F6;&#x8868;
using filesort&#xFF1A;&#x7528;&#x5230;&#x989D;&#x5916;&#x7684;&#x6392;&#x5E8F;. (&#x5F53;&#x4F7F;&#x7528;order by v1,&#x800C;&#x6CA1;&#x7528;&#x5230;&#x7D22;&#x5F15;&#x65F6;,&#x5C31;&#x4F1A;&#x4F7F;&#x7528;&#x989D;&#x5916;&#x7684;&#x6392;&#x5E8F;)
range checked for eache record(index map:N)&#xFF1A;&#x6CA1;&#x6709;&#x597D;&#x7684;&#x7D22;&#x5F15;.</code></pre></li>
</ul>
<h3 id="profiling&#x5206;&#x6790;&#x67E5;&#x8BE2;"><a href="#profiling&#x5206;&#x6790;&#x67E5;&#x8BE2;" class="headerlink" title="profiling&#x5206;&#x6790;&#x67E5;&#x8BE2;"></a><strong>profiling&#x5206;&#x6790;&#x67E5;&#x8BE2;</strong></h3><p>&#x901A;&#x8FC7;&#x6162;&#x65E5;&#x5FD7;&#x67E5;&#x8BE2;&#x53EF;&#x4EE5;&#x77E5;&#x9053;&#x54EA;&#x4E9B;SQL&#x8BED;&#x53E5;&#x6267;&#x884C;&#x6548;&#x7387;&#x4F4E;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;explain&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F97;&#x77E5;SQL&#x8BED;&#x53E5;&#x7684;&#x5177;&#x4F53;&#x6267;&#x884C;&#x60C5;&#x51B5;&#xFF0C;&#x7D22;&#x5F15;&#x4F7F;&#x7528;&#x7B49;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x7ED3;&#x5408;show&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x6267;&#x884C;&#x72B6;&#x6001;&#x3002;<br>&#x5982;&#x679C;&#x89C9;&#x5F97;explain&#x7684;&#x4FE1;&#x606F;&#x4E0D;&#x591F;&#x8BE6;&#x7EC6;&#xFF0C;&#x53EF;&#x4EE5;&#x540C;&#x901A;&#x8FC7;profiling&#x547D;&#x4EE4;&#x5F97;&#x5230;&#x66F4;&#x51C6;&#x786E;&#x7684;SQL&#x6267;&#x884C;&#x6D88;&#x8017;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7684;&#x4FE1;&#x606F;&#x3002;<br>profiling&#x9ED8;&#x8BA4;&#x662F;&#x5173;&#x95ED;&#x7684;&#x3002;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x8BED;&#x53E5;&#x67E5;&#x770B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select @@profiling;</span><br><span class="line">+-------------+</span><br><span class="line">| @@profiling |</span><br><span class="line">+-------------+</span><br><span class="line">|           0 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<p>&#x6253;&#x5F00;&#x529F;&#x80FD;&#xFF1A; mysql&gt;set profiling=1; </p>
<p>&#x6267;&#x884C;&#x9700;&#x8981;&#x6D4B;&#x8BD5;&#x7684;sql &#x8BED;&#x53E5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set profiling=1;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select @@profiling;</span><br><span class="line">+-------------+</span><br><span class="line">| @@profiling |</span><br><span class="line">+-------------+</span><br><span class="line">|           1 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>&#x5F97;&#x5230;&#x88AB;&#x6267;&#x884C;&#x7684;SQL&#x8BED;&#x53E5;&#x7684;&#x65F6;&#x95F4;&#x548C;ID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profiles\G </span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">Query_ID: 1</span><br><span class="line">Duration: 35.03156400</span><br><span class="line">   Query: select * from kaifang3 where Mobile=15830151589</span><br><span class="line">1 row in set (0.02 sec)</span><br></pre></td></tr></table></figure>

<p>&#x5F97;&#x5230;&#x5BF9;&#x5E94;SQL&#x8BED;&#x53E5;&#x6267;&#x884C;&#x7684;&#x8BE6;&#x7EC6;&#x4FE1;&#x606F;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show profile for query 1 ;  </span><br><span class="line">+--------------------------------+-----------+</span><br><span class="line">| Status                         | Duration  |</span><br><span class="line">+--------------------------------+-----------+</span><br><span class="line">| starting                       |  0.000099 |</span><br><span class="line">| Waiting for query cache lock   |  0.000019 |</span><br><span class="line">| checking query cache for query |  0.000137 |</span><br><span class="line">| checking permissions           |  0.000152 |</span><br><span class="line">| Opening tables                 |  0.000062 |</span><br><span class="line">| System lock                    |  0.011881 |</span><br><span class="line">| Waiting for query cache lock   |  0.000093 |</span><br><span class="line">| init                           |  0.000212 |</span><br><span class="line">| optimizing                     |  0.000036 |</span><br><span class="line">| statistics                     |  0.000049 |</span><br><span class="line">| preparing                      |  0.000037 |</span><br><span class="line">| executing                      |  0.000011 |</span><br><span class="line">| Sending data                   |  0.000189 |</span><br><span class="line">| Waiting for query cache lock   |  0.000010 |</span><br><span class="line">| Sending data                   |  0.000038 |</span><br><span class="line">| storing result in query cache  | 34.995402 |</span><br><span class="line">| end                            |  0.000051 |</span><br><span class="line">| query end                      |  0.000123 |</span><br><span class="line">| closing tables                 |  0.000047 |</span><br><span class="line">| freeing items                  |  0.000921 |</span><br><span class="line">| logging slow query             |  0.000012 |</span><br><span class="line">| logging slow query             |  0.021972 |</span><br><span class="line">| cleaning up                    |  0.000015 |</span><br><span class="line">+--------------------------------+-----------+</span><br><span class="line">23 rows in set (0.02 sec)</span><br></pre></td></tr></table></figure>

<p>&#x4EE5;&#x4E0A;&#x7684;16&#x884C;&#x662F;&#x9488;&#x5BF9;&#x975E;&#x5E38;&#x7B80;&#x5355;&#x7684;select&#x8BED;&#x53E5;&#x7684;&#x8D44;&#x6E90;&#x4FE1;&#x606F;&#xFF0C;&#x5BF9;&#x4E8E;&#x8F83;&#x590D;&#x6742;&#x7684;SQL&#x8BED;&#x53E5;&#xFF0C;&#x4F1A;&#x6709;&#x66F4;&#x591A;&#x7684;&#x884C;&#x548C;&#x5B57;&#x6BB5;&#xFF0C;&#x6BD4;&#x5982;converting HEAP to MyISAM &#x3001;Copying to tmp table&#x7B49;&#x7B49;&#xFF0C;&#x7531;&#x4E8E;&#x4EE5;&#x4E0A;&#x7684;SQL&#x8BED;&#x53E5;&#x4E0D;&#x5B58;&#x5728;&#x590D;&#x6742;&#x7684;&#x8868;&#x64CD;&#x4F5C;&#xFF0C;&#x6240;&#x4EE5;&#x672A;&#x663E;&#x793A;&#x8FD9;&#x4E9B;&#x5B57;&#x6BB5;&#x3002;&#x901A;&#x8FC7;profiling&#x8D44;&#x6E90;&#x8017;&#x8D39;&#x4FE1;&#x606F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x91C7;&#x53D6;&#x9488;&#x5BF9;&#x6027;&#x7684;&#x4F18;&#x5316;&#x63AA;&#x65BD;&#x3002;</p>
<p>&#x6D4B;&#x8BD5;&#x5B8C;&#x6BD5;&#x540E; &#xFF0C;&#x5173;&#x95ED;&#xFF1A;mysql&gt; set profiling=0</p>
<h3 id="&#x7D22;&#x5F15;&#x53CA;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"><a href="#&#x7D22;&#x5F15;&#x53CA;&#x67E5;&#x8BE2;&#x4F18;&#x5316;" class="headerlink" title="&#x7D22;&#x5F15;&#x53CA;&#x67E5;&#x8BE2;&#x4F18;&#x5316;"></a><strong>&#x7D22;&#x5F15;&#x53CA;&#x67E5;&#x8BE2;&#x4F18;&#x5316;</strong></h3><h4 id="&#x7D22;&#x5F15;&#x7684;&#x7C7B;&#x578B;"><a href="#&#x7D22;&#x5F15;&#x7684;&#x7C7B;&#x578B;" class="headerlink" title="&#x7D22;&#x5F15;&#x7684;&#x7C7B;&#x578B;"></a>&#x7D22;&#x5F15;&#x7684;&#x7C7B;&#x578B;</h4><ul>
<li>&#x666E;&#x901A;&#x7D22;&#x5F15;&#xFF1A;&#x8FD9;&#x662F;&#x6700;&#x57FA;&#x672C;&#x7684;&#x7D22;&#x5F15;&#x7C7B;&#x578B;&#xFF0C;&#x6CA1;&#x552F;&#x4E00;&#x6027;&#x4E4B;&#x7C7B;&#x7684;&#x9650;&#x5236;&#x3002;</li>
<li>&#x552F;&#x4E00;&#x6027;&#x7D22;&#x5F15;&#xFF1A;&#x548C;&#x666E;&#x901A;&#x7D22;&#x5F15;&#x57FA;&#x672C;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x6240;&#x6709;&#x7684;&#x7D22;&#x5F15;&#x5217;&#x503C;&#x4FDD;&#x6301;&#x552F;&#x4E00;&#x6027;&#x3002;</li>
<li>&#x4E3B;&#x952E;&#xFF1A;&#x4E3B;&#x952E;&#x662F;&#x4E00;&#x79CD;&#x552F;&#x4E00;&#x7D22;&#x5F15;&#xFF0C;&#x4F46;&#x5FC5;&#x987B;&#x6307;&#x5B9A;&#x4E3A;&#x201D;PRIMARY KEY&#x201D;&#x3002;</li>
<li>&#x5168;&#x6587;&#x7D22;&#x5F15;&#xFF1A;MYSQL&#x4ECE;3.23.23&#x5F00;&#x59CB;&#x652F;&#x6301;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x548C;&#x5168;&#x6587;&#x68C0;&#x7D22;&#x3002;&#x5728;MYSQL&#x4E2D;&#xFF0C;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x7684;&#x7D22;&#x5F15;&#x7C7B;&#x578B;&#x4E3A;FULLTEXT&#x3002;&#x5168;&#x6587;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x5728;VARCHAR&#x6216;&#x8005;TEXT&#x7C7B;&#x578B;&#x7684;&#x5217;&#x4E0A;&#x521B;&#x5EFA;&#x3002;</li>
</ul>
<p>&#x5927;&#x591A;&#x6570;MySQL&#x7D22;&#x5F15;(PRIMARY KEY&#x3001;UNIQUE&#x3001;INDEX&#x548C;FULLTEXT)&#x4F7F;&#x7528;B&#x6811;&#x4E2D;&#x5B58;&#x50A8;&#x3002;&#x7A7A;&#x95F4;&#x5217;&#x7C7B;&#x578B;&#x7684;&#x7D22;&#x5F15;&#x4F7F;&#x7528;R-&#x6811;&#xFF0C;MEMORY&#x8868;&#x652F;&#x6301;hash&#x7D22;&#x5F15;&#x3002;</p>
<h4 id="&#x5355;&#x5217;&#x7D22;&#x5F15;&#x548C;&#x591A;&#x5217;&#x7D22;&#x5F15;&#xFF08;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF09;"><a href="#&#x5355;&#x5217;&#x7D22;&#x5F15;&#x548C;&#x591A;&#x5217;&#x7D22;&#x5F15;&#xFF08;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF09;" class="headerlink" title="&#x5355;&#x5217;&#x7D22;&#x5F15;&#x548C;&#x591A;&#x5217;&#x7D22;&#x5F15;&#xFF08;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF09;"></a>&#x5355;&#x5217;&#x7D22;&#x5F15;&#x548C;&#x591A;&#x5217;&#x7D22;&#x5F15;&#xFF08;&#x590D;&#x5408;&#x7D22;&#x5F15;&#xFF09;</h4><p>&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x662F;&#x5355;&#x5217;&#x7D22;&#x5F15;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x591A;&#x5217;&#x7D22;&#x5F15;&#x3002;&#x5BF9;&#x76F8;&#x5173;&#x7684;&#x5217;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x662F;&#x63D0;&#x9AD8;SELECT&#x64CD;&#x4F5C;&#x6027;&#x80FD;&#x7684;&#x6700;&#x4F73;&#x9014;&#x5F84;&#x4E4B;&#x4E00;&#x3002;</p>
<h5 id="&#x591A;&#x5217;&#x7D22;&#x5F15;"><a href="#&#x591A;&#x5217;&#x7D22;&#x5F15;" class="headerlink" title="&#x591A;&#x5217;&#x7D22;&#x5F15;"></a>&#x591A;&#x5217;&#x7D22;&#x5F15;</h5><p>MySQL&#x53EF;&#x4EE5;&#x4E3A;&#x591A;&#x4E2A;&#x5217;&#x521B;&#x5EFA;&#x7D22;&#x5F15;&#x3002;&#x4E00;&#x4E2A;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x5305;&#x62EC;15&#x4E2A;&#x5217;&#x3002;&#x5BF9;&#x4E8E;&#x67D0;&#x4E9B;&#x5217;&#x7C7B;&#x578B;&#xFF0C;&#x53EF;&#x4EE5;&#x7D22;&#x5F15;&#x5217;&#x7684;&#x5DE6;&#x524D;&#x7F00;&#xFF0C;&#x5217;&#x7684;&#x987A;&#x5E8F;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;<br>&#x591A;&#x5217;&#x7D22;&#x5F15;&#x53EF;&#x4EE5;&#x89C6;&#x4E3A;&#x5305;&#x542B;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x7D22;&#x5F15;&#x5217;&#x7684;&#x503C;&#x800C;&#x521B;&#x5EFA;&#x7684;&#x503C;&#x7684;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5373;&#x4F7F;&#x662F;&#x9650;&#x5236;&#x6700;&#x4E25;&#x683C;&#x7684;&#x5355;&#x5217;&#x7D22;&#x5F15;&#xFF0C;&#x5B83;&#x7684;&#x9650;&#x5236;&#x80FD;&#x529B;&#x4E5F;&#x8FDC;&#x8FDC;&#x4F4E;&#x4E8E;&#x591A;&#x5217;&#x7D22;&#x5F15;&#x3002;</p>
<h5 id="&#x6700;&#x5DE6;&#x524D;&#x7F00;"><a href="#&#x6700;&#x5DE6;&#x524D;&#x7F00;" class="headerlink" title="&#x6700;&#x5DE6;&#x524D;&#x7F00;"></a>&#x6700;&#x5DE6;&#x524D;&#x7F00;</h5><p>&#x591A;&#x5217;&#x7D22;&#x5F15;&#x6709;&#x4E00;&#x4E2A;&#x7279;&#x70B9;&#xFF0C;&#x5373;&#x6700;&#x5DE6;&#x524D;&#x7F00;&#xFF08;Leftmost Prefixing&#xFF09;&#x3002;&#x5047;&#x5982;&#x6709;&#x4E00;&#x4E2A;&#x591A;&#x5217;&#x7D22;&#x5F15;&#x4E3A;key(firstname lastname age)&#xFF0C;&#x5F53;&#x641C;&#x7D22;&#x6761;&#x4EF6;&#x662F;&#x4EE5;&#x4E0B;&#x5404;&#x79CD;&#x5217;&#x7684;&#x7EC4;&#x5408;&#x548C;&#x987A;&#x5E8F;&#x65F6;&#xFF0C;MySQL&#x5C06;&#x4F7F;&#x7528;&#x8BE5;&#x591A;&#x5217;&#x7D22;&#x5F15;&#xFF1A;<br>firstname&#xFF0C;lastname&#xFF0C;age<br>firstname&#xFF0C;lastname<br>firstname</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x76F8;&#x5F53;&#x4E8E;&#x8FD8;&#x5EFA;&#x7ACB;&#x4E86;key(firstname lastname)&#x548C;key(firstname)&#x3002;</p>
<h4 id="&#x7D22;&#x5F15;&#x4E3B;&#x8981;&#x7684;&#x64CD;&#x4F5C;"><a href="#&#x7D22;&#x5F15;&#x4E3B;&#x8981;&#x7684;&#x64CD;&#x4F5C;" class="headerlink" title="&#x7D22;&#x5F15;&#x4E3B;&#x8981;&#x7684;&#x64CD;&#x4F5C;"></a>&#x7D22;&#x5F15;&#x4E3B;&#x8981;&#x7684;&#x64CD;&#x4F5C;</h4><p>&#x5FEB;&#x901F;&#x627E;&#x51FA;&#x5339;&#x914D;&#x4E00;&#x4E2A;WHERE&#x5B50;&#x53E5;&#x7684;&#x884C;&#x3002;<br>&#x5220;&#x9664;&#x884C;&#x3002;&#x5F53;&#x6267;&#x884C;&#x8054;&#x63A5;&#x65F6;&#xFF0C;&#x4ECE;&#x5176;&#x5B83;&#x8868;&#x68C0;&#x7D22;&#x884C;&#x3002;<br>&#x5BF9;&#x5177;&#x4F53;&#x6709;&#x7D22;&#x5F15;&#x7684;&#x5217;key_col&#x627E;&#x51FA;MAX()&#x6216;MIN()&#x503C;&#x3002;&#x7531;&#x9884;&#x5904;&#x7406;&#x5668;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#xFF0C;&#x68C0;&#x67E5;&#x662F;&#x5426;&#x5BF9;&#x7D22;&#x5F15;&#x4E2D;&#x5728;key_col&#x4E4B;&#x524D;&#x53D1;&#x751F;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x5143;&#x7D20;&#x4F7F;&#x7528;&#x4E86;WHERE key_part_# = constant&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;MySQL&#x4E3A;&#x6BCF;&#x4E2A;MIN()&#x6216;MAX()&#x8868;&#x8FBE;&#x5F0F;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x5173;&#x952E;&#x5B57;&#x67E5;&#x627E;&#xFF0C;&#x5E76;&#x7528;&#x5E38;&#x6570;&#x66FF;&#x6362;&#x5B83;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x8868;&#x8FBE;&#x5F0F;&#x66FF;&#x6362;&#x4E3A;&#x5E38;&#x91CF;&#xFF0C;&#x67E5;&#x8BE2;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x4F8B;&#x5982;&#xFF1A;<br>SELECT MIN(key2), MAX (key2)  FROM tb WHERE key1=10;</p>
<p>&#x5982;&#x679C;&#x5BF9;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6700;&#x5DE6;&#x9762;&#x7684;&#x524D;&#x7F00;&#x8FDB;&#x884C;&#x4E86;&#x6392;&#x5E8F;&#x6216;&#x5206;&#x7EC4;(&#x4F8B;&#x5982;&#xFF0C;ORDER BY key_part_1,key_part_2)&#xFF0C;&#x6392;&#x5E8F;&#x6216;&#x5206;&#x7EC4;&#x4E00;&#x4E2A;&#x8868;&#x3002;&#x5982;&#x679C;&#x6240;&#x6709;&#x5173;&#x952E;&#x5B57;&#x5143;&#x7D20;&#x540E;&#x9762;&#x6709;DESC&#xFF0C;&#x5173;&#x952E;&#x5B57;&#x4EE5;&#x5012;&#x5E8F;&#x88AB;&#x8BFB;&#x53D6;&#x3002;<br>&#x5728;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x5BF9;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x8FDB;&#x884C;&#x4F18;&#x5316;&#x4EE5;&#x4FBF;&#x4E0D;&#x7528;&#x67E5;&#x8BE2;&#x6570;&#x636E;&#x884C;&#x5373;&#x53EF;&#x4EE5;&#x68C0;&#x7D22;&#x503C;&#x3002;&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x53EA;&#x4F7F;&#x7528;&#x6765;&#x81EA;&#x67D0;&#x4E2A;&#x8868;&#x7684;&#x6570;&#x5B57;&#x578B;&#x5E76;&#x4E14;&#x6784;&#x6210;&#x67D0;&#x4E9B;&#x5173;&#x952E;&#x5B57;&#x7684;&#x6700;&#x5DE6;&#x9762;&#x524D;&#x7F00;&#x7684;&#x5217;&#xFF0C;&#x4E3A;&#x4E86;&#x66F4;&#x5FEB;&#xFF0C;&#x53EF;&#x4EE5;&#x4ECE;&#x7D22;&#x5F15;&#x6811;&#x68C0;&#x7D22;&#x51FA;&#x503C;&#x3002;<br>SELECT key_part3 FROM tb WHERE key_part1=1</p>
<p>&#x6709;&#x65F6;MySQL&#x4E0D;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x5373;&#x4F7F;&#x6709;&#x53EF;&#x7528;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x4E00;&#x79CD;&#x60C5;&#x5F62;&#x662F;&#x5F53;&#x4F18;&#x5316;&#x5668;&#x4F30;&#x8BA1;&#x5230;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x5C06;&#x9700;&#x8981;MySQL&#x8BBF;&#x95EE;&#x8868;&#x4E2D;&#x7684;&#x5927;&#x90E8;&#x5206;&#x884C;&#x65F6;&#x3002;(&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8868;&#x626B;&#x63CF;&#x53EF;&#x80FD;&#x4F1A;&#x66F4;&#x5FEB;&#x4E9B;&#xFF09;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x7C7B;&#x67E5;&#x8BE2;&#x4F7F;&#x7528;LIMIT&#x53EA;&#x641C;&#x7D22;&#x90E8;&#x5206;&#x884C;&#xFF0C;MySQL&#x5219;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x627E;&#x5230;&#x51E0;&#x884C;&#x5E76;&#x5728;&#x7ED3;&#x679C;&#x4E2D;&#x8FD4;&#x56DE;&#x3002;</p>
<h4 id="&#x5408;&#x7406;&#x7684;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x7684;&#x5EFA;&#x8BAE;"><a href="#&#x5408;&#x7406;&#x7684;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x7684;&#x5EFA;&#x8BAE;" class="headerlink" title="&#x5408;&#x7406;&#x7684;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x7684;&#x5EFA;&#x8BAE;"></a>&#x5408;&#x7406;&#x7684;&#x5EFA;&#x7ACB;&#x7D22;&#x5F15;&#x7684;&#x5EFA;&#x8BAE;</h4><ol>
<li>&#x8D8A;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x901A;&#x5E38;&#x66F4;&#x597D;&#xFF1A;&#x8D8A;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x901A;&#x5E38;&#x5728;&#x78C1;&#x76D8;&#x3001;&#x5185;&#x5B58;&#x548C;CPU&#x7F13;&#x5B58;&#x4E2D;&#x90FD;&#x9700;&#x8981;&#x66F4;&#x5C11;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5904;&#x7406;&#x8D77;&#x6765;&#x66F4;&#x5FEB;&#x3002;</li>
<li>&#x7B80;&#x5355;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x66F4;&#x597D;&#xFF1A;&#x6574;&#x578B;&#x6570;&#x636E;&#x6BD4;&#x8D77;&#x5B57;&#x7B26;&#xFF0C;&#x5904;&#x7406;&#x5F00;&#x9500;&#x66F4;&#x5C0F;&#xFF0C;&#x56E0;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x6BD4;&#x8F83;&#x66F4;&#x590D;&#x6742;&#x3002;&#x5728;MySQL&#x4E2D;&#xFF0C;&#x5E94;&#x8BE5;&#x7528;&#x5185;&#x7F6E;&#x7684;&#x65E5;&#x671F;&#x548C;&#x65F6;&#x95F4;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x6765;&#x5B58;&#x50A8;&#x65F6;&#x95F4;&#xFF1B;&#x4EE5;&#x53CA;&#x7528;&#x6574;&#x578B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5B58;&#x50A8;IP&#x5730;&#x5740;&#x3002;</li>
<li>&#x5C3D;&#x91CF;&#x907F;&#x514D;NULL&#xFF1A;&#x5E94;&#x8BE5;&#x6307;&#x5B9A;&#x5217;&#x4E3A;NOT NULL&#xFF0C;&#x9664;&#x975E;&#x4F60;&#x60F3;&#x5B58;&#x50A8;NULL&#x3002;&#x5728;MySQL&#x4E2D;&#xFF0C;&#x542B;&#x6709;&#x7A7A;&#x503C;&#x7684;&#x5217;&#x5F88;&#x96BE;&#x8FDB;&#x884C;&#x67E5;&#x8BE2;&#x4F18;&#x5316;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x4F7F;&#x5F97;&#x7D22;&#x5F15;&#x3001;&#x7D22;&#x5F15;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x6BD4;&#x8F83;&#x8FD0;&#x7B97;&#x66F4;&#x52A0;&#x590D;&#x6742;&#x3002;&#x4F60;&#x5E94;&#x8BE5;&#x7528;0&#x3001;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x503C;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x7A7A;&#x4E32;&#x4EE3;&#x66FF;&#x7A7A;&#x503C;</li>
</ol>
<h4 id="&#x5173;&#x4E8E;&#x7D22;&#x5F15;&#x548C;&#x5199;SQL&#x8BED;&#x53E5;&#x65F6;&#x5E94;&#x5F53;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x4E9B;&#x7410;&#x788E;&#x5EFA;&#x8BAE;&#x548C;&#x6CE8;&#x610F;&#x70B9;"><a href="#&#x5173;&#x4E8E;&#x7D22;&#x5F15;&#x548C;&#x5199;SQL&#x8BED;&#x53E5;&#x65F6;&#x5E94;&#x5F53;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x4E9B;&#x7410;&#x788E;&#x5EFA;&#x8BAE;&#x548C;&#x6CE8;&#x610F;&#x70B9;" class="headerlink" title="&#x5173;&#x4E8E;&#x7D22;&#x5F15;&#x548C;&#x5199;SQL&#x8BED;&#x53E5;&#x65F6;&#x5E94;&#x5F53;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x4E9B;&#x7410;&#x788E;&#x5EFA;&#x8BAE;&#x548C;&#x6CE8;&#x610F;&#x70B9;"></a>&#x5173;&#x4E8E;&#x7D22;&#x5F15;&#x548C;&#x5199;SQL&#x8BED;&#x53E5;&#x65F6;&#x5E94;&#x5F53;&#x6CE8;&#x610F;&#x7684;&#x4E00;&#x4E9B;&#x7410;&#x788E;&#x5EFA;&#x8BAE;&#x548C;&#x6CE8;&#x610F;&#x70B9;</h4><ol>
<li>&#x5F53;&#x7ED3;&#x679C;&#x96C6;&#x53EA;&#x6709;&#x4E00;&#x884C;&#x6570;&#x636E;&#x65F6;&#x4F7F;&#x7528;LIMIT 1</li>
<li>&#x907F;&#x514D;SELECT *&#xFF0C;&#x59CB;&#x7EC8;&#x6307;&#x5B9A;&#x4F60;&#x9700;&#x8981;&#x7684;&#x5217;<pre><code>&#x4ECE;&#x8868;&#x4E2D;&#x8BFB;&#x53D6;&#x8D8A;&#x591A;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x67E5;&#x8BE2;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x6162;&#x3002;&#x4ED6;&#x589E;&#x52A0;&#x4E86;&#x78C1;&#x76D8;&#x9700;&#x8981;&#x64CD;&#x4F5C;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x8FD8;&#x662F;&#x5728;&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#x4E0E;WEB&#x670D;&#x52A1;&#x5668;&#x662F;&#x72EC;&#x7ACB;&#x5206;&#x5F00;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x3002;&#x4F60;&#x5C06;&#x4F1A;&#x7ECF;&#x5386;&#x975E;&#x5E38;&#x6F2B;&#x957F;&#x7684;&#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#xFF0C;&#x4EC5;&#x4EC5;&#x662F;&#x56E0;&#x4E3A;&#x6570;&#x636E;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x4F20;&#x8F93;&#x3002;</code></pre></li>
<li>&#x4F7F;&#x7528;&#x8FDE;&#x63A5;&#xFF08;JOIN&#xFF09;&#x6765;&#x4EE3;&#x66FF;&#x5B50;&#x67E5;&#x8BE2;(Sub-Queries)<pre><code>&#x8FDE;&#x63A5;&#xFF08;JOIN&#xFF09;.. &#x4E4B;&#x6240;&#x4EE5;&#x66F4;&#x6709;&#x6548;&#x7387;&#x4E00;&#x4E9B;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;MySQL&#x4E0D;&#x9700;&#x8981;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x8868;&#x6765;&#x5B8C;&#x6210;&#x8FD9;&#x4E2A;&#x903B;&#x8F91;&#x4E0A;&#x7684;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x6B65;&#x9AA4;&#x7684;&#x67E5;&#x8BE2;&#x5DE5;&#x4F5C;&#x3002;</code></pre></li>
<li>&#x4F7F;&#x7528;ENUM&#x3001;CHAR &#x800C;&#x4E0D;&#x662F;VARCHAR&#xFF0C;&#x4F7F;&#x7528;&#x5408;&#x7406;&#x7684;&#x5B57;&#x6BB5;&#x5C5E;&#x6027;&#x957F;&#x5EA6;</li>
<li>&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F7F;&#x7528;NOT NULL</li>
<li>&#x56FA;&#x5B9A;&#x957F;&#x5EA6;&#x7684;&#x8868;&#x4F1A;&#x66F4;&#x5FEB;</li>
<li>&#x62C6;&#x5206;&#x5927;&#x7684;DELETE &#x6216;INSERT &#x8BED;&#x53E5;</li>
<li>&#x67E5;&#x8BE2;&#x7684;&#x5217;&#x8D8A;&#x5C0F;&#x8D8A;&#x5FEB;</li>
</ol>
<h4 id="Where&#x6761;&#x4EF6;"><a href="#Where&#x6761;&#x4EF6;" class="headerlink" title="Where&#x6761;&#x4EF6;"></a>Where&#x6761;&#x4EF6;</h4><p>&#x5728;&#x67E5;&#x8BE2;&#x4E2D;&#xFF0C;WHERE&#x6761;&#x4EF6;&#x4E5F;&#x662F;&#x4E00;&#x4E2A;&#x6BD4;&#x8F83;&#x91CD;&#x8981;&#x7684;&#x56E0;&#x7D20;&#xFF0C;&#x5C3D;&#x91CF;&#x5C11;&#x5E76;&#x4E14;&#x662F;&#x5408;&#x7406;&#x7684;where&#x6761;&#x4EF6;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#xFF0C;&#x5C3D;&#x91CF;&#x5728;&#x591A;&#x4E2A;&#x6761;&#x4EF6;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x628A;&#x4F1A;&#x63D0;&#x53D6;&#x5C3D;&#x91CF;&#x5C11;&#x6570;&#x636E;&#x91CF;&#x7684;&#x6761;&#x4EF6;&#x653E;&#x5728;&#x524D;&#x9762;&#xFF0C;&#x51CF;&#x5C11;&#x540E;&#x4E00;&#x4E2A;where&#x6761;&#x4EF6;&#x7684;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#x3002;</p>
<p>&#x6709;&#x4E9B;where&#x6761;&#x4EF6;&#x4F1A;&#x5BFC;&#x81F4;&#x7D22;&#x5F15;&#x65E0;&#x6548;&#xFF1A;<br>where&#x5B50;&#x53E5;&#x7684;&#x67E5;&#x8BE2;&#x6761;&#x4EF6;&#x91CC;&#x6709;&#xFF01;=&#xFF0C;MySQL&#x5C06;&#x65E0;&#x6CD5;&#x4F7F;&#x7528;&#x7D22;&#x5F15;&#x3002;<br>where&#x5B50;&#x53E5;&#x4F7F;&#x7528;&#x4E86;Mysql&#x51FD;&#x6570;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7D22;&#x5F15;&#x5C06;&#x65E0;&#x6548;&#xFF0C;&#x6BD4;&#x5982;&#xFF1A;select * from tb where left(name, 4) = &#x2018;xxx&#x2019;<br>&#x4F7F;&#x7528;LIKE&#x8FDB;&#x884C;&#x641C;&#x7D22;&#x5339;&#x914D;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x6837;&#x7D22;&#x5F15;&#x662F;&#x6709;&#x6548;&#x7684;&#xFF1A;select * from tbl1 where name like &#x2018;xxx%&#x2019;&#xFF0C;&#x800C;like &#x2018;%xxx%&#x2019; &#x65F6;&#x7D22;&#x5F15;&#x65E0;&#x6548;</p>
<h3 id="&#x914D;&#x7F6E;&#x4F18;&#x5316;"><a href="#&#x914D;&#x7F6E;&#x4F18;&#x5316;" class="headerlink" title="&#x914D;&#x7F6E;&#x4F18;&#x5316;"></a><strong>&#x914D;&#x7F6E;&#x4F18;&#x5316;</strong></h3><p>&#x5B89;&#x88C5;MySQL&#x540E;&#xFF0C;&#x914D;&#x7F6E;&#x6587;&#x4EF6;my.cnf&#x5728; /MySQL&#x5B89;&#x88C5;&#x76EE;&#x5F55;/share/mysql&#x76EE;&#x5F55;&#x4E2D;&#xFF0C;&#x8BE5;&#x76EE;&#x5F55;&#x4E2D;&#x8FD8;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x4F9B;&#x53C2;&#x8003;&#xFF0C;&#x6709;my-large.cnf &#xFF0C;my-huge.cnf&#xFF0C;  my-medium.cnf&#xFF0C;my-small.cnf&#xFF0C;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x5927;&#x4E2D;&#x5C0F;&#x578B;&#x6570;&#x636E;&#x5E93;&#x5E94;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x3002;win&#x73AF;&#x5883;&#x4E0B;&#x5373;&#x5B58;&#x5728;&#x4E8E;MySQL&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x4E2D;&#x7684;.ini&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x5217;&#x51FA;&#x4E86;&#x5BF9;&#x6027;&#x80FD;&#x4F18;&#x5316;&#x5F71;&#x54CD;&#x8F83;&#x5927;&#x7684;&#x4E3B;&#x8981;&#x53D8;&#x91CF;&#xFF0C;&#x4E3B;&#x8981;&#x5206;&#x4E3A;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x53D8;&#x91CF;&#x548C;&#x7F13;&#x51B2;&#x533A;&#x53D8;&#x91CF;&#x3002;</p>
<h4 id="&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x53D8;&#x91CF;&#xFF1A;"><a href="#&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x53D8;&#x91CF;&#xFF1A;" class="headerlink" title="&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x53D8;&#x91CF;&#xFF1A;"></a>&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x7684;&#x53D8;&#x91CF;&#xFF1A;</h4><h5 id="1-max-connections"><a href="#1-max-connections" class="headerlink" title="1)     max_connections"></a>1)     max_connections</h5><p>MySQL&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#xFF0C;&#x589E;&#x52A0;&#x8BE5;&#x503C;&#x589E;&#x52A0;mysqld &#x8981;&#x6C42;&#x7684;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x7684;&#x6570;&#x91CF;&#x3002;&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x91CF;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x5EFA;&#x8BAE;&#x8C03;&#x9AD8;&#x6B64;&#x503C;&#xFF0C;&#x4EE5;&#x589E;&#x52A0;&#x5E76;&#x884C;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x5EFA;&#x7ACB;&#x5728;&#x673A;&#x5668;&#x80FD;&#x652F;&#x6491;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x56E0;&#x4E3A;&#x5982;&#x679C;&#x8FDE;&#x63A5;&#x6570;&#x8D8A;&#x591A;&#xFF0C;&#x4ECB;&#x4E8E;MySQL&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x63D0;&#x4F9B;&#x8FDE;&#x63A5;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x5C31;&#x4F1A;&#x5F00;&#x9500;&#x8D8A;&#x591A;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x6240;&#x4EE5;&#x8981;&#x9002;&#x5F53;&#x8C03;&#x6574;&#x8BE5;&#x503C;&#xFF0C;&#x4E0D;&#x80FD;&#x76F2;&#x76EE;&#x63D0;&#x9AD8;&#x8BBE;&#x503C;&#x3002;</p>
<p>&#x6570;&#x503C;&#x8FC7;&#x5C0F;&#x4F1A;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;ERROR 1040: Too many connections&#x9519;&#x8BEF;&#xFF0C;&#x53EF;&#x4EE5;&#x8FC7;&#x2019;conn%&#x2019;&#x901A;&#x914D;&#x7B26;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#xFF0C;&#x4EE5;&#x5B9A;&#x593A;&#x8BE5;&#x503C;&#x7684;&#x5927;&#x5C0F;&#x3002;<br>show variables like &#x2018;max_connections&#x2019; &#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;<br>show  status like &#x2018;max_used_connections&#x2019; &#x54CD;&#x5E94;&#x7684;&#x8FDE;&#x63A5;&#x6570;</p>
<p>&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;max_connections&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+</span><br><span class="line">| max_connections | 256  |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+</span><br><span class="line"></span><br><span class="line">mysql&gt; show status like &apos;max%connections&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;-+</span><br><span class="line">| Variable_name       | Value |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;-+</span><br><span class="line">| max_used_connections | 256|</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;-+</span><br></pre></td></tr></table></figure>

<p>max_used_connections / max_connections * 100% &#xFF08;&#x7406;&#x60F3;&#x503C;&#x2248; 85%&#xFF09;<br>&#x5982;&#x679C;max_used_connections&#x8DDF;max_connections&#x76F8;&#x540C; &#x90A3;&#x4E48;&#x5C31;&#x662F;max_connections&#x8BBE;&#x7F6E;&#x8FC7;&#x4F4E;&#x6216;&#x8005;&#x8D85;&#x8FC7;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#x4E0A;&#x9650;&#x4E86;&#xFF0C;&#x4F4E;&#x4E8E;10%&#x5219;&#x8BBE;&#x7F6E;&#x8FC7;&#x5927;&#x3002;</p>
<h5 id="2-back-log"><a href="#2-back-log" class="headerlink" title="2)     back_log"></a>2)     back_log</h5><p>MySQL&#x80FD;&#x6682;&#x5B58;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x91CF;&#x3002;&#x5F53;&#x4E3B;&#x8981;MySQL&#x7EBF;&#x7A0B;&#x5728;&#x4E00;&#x4E2A;&#x5F88;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x5F97;&#x5230;&#x975E;&#x5E38;&#x591A;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x5C31;&#x8D77;&#x4F5C;&#x7528;&#x3002;&#x5982;&#x679C;MySQL&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x8FBE;&#x5230;max_connections&#x65F6;&#xFF0C;&#x65B0;&#x6765;&#x7684;&#x8BF7;&#x6C42;&#x5C06;&#x4F1A;&#x88AB;&#x5B58;&#x5728;&#x5806;&#x6808;&#x4E2D;&#xFF0C;&#x4EE5;&#x7B49;&#x5F85;&#x67D0;&#x4E00;&#x8FDE;&#x63A5;&#x91CA;&#x653E;&#x8D44;&#x6E90;&#xFF0C;&#x8BE5;&#x5806;&#x6808;&#x7684;&#x6570;&#x91CF;&#x5373;back_log&#xFF0C;&#x5982;&#x679C;&#x7B49;&#x5F85;&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x91CF;&#x8D85;&#x8FC7;back_log&#xFF0C;&#x5C06;&#x4E0D;&#x88AB;&#x6388;&#x4E88;&#x8FDE;&#x63A5;&#x8D44;&#x6E90;&#x3002;<br>back_log&#x503C;&#x6307;&#x51FA;&#x5728;MySQL&#x6682;&#x65F6;&#x505C;&#x6B62;&#x56DE;&#x7B54;&#x65B0;&#x8BF7;&#x6C42;&#x4E4B;&#x524D;&#x7684;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x8BF7;&#x6C42;&#x53EF;&#x4EE5;&#x88AB;&#x5B58;&#x5728;&#x5806;&#x6808;&#x4E2D;&#x3002;&#x53EA;&#x6709;&#x5982;&#x679C;&#x671F;&#x671B;&#x5728;&#x4E00;&#x4E2A;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x6709;&#x5F88;&#x591A;&#x8FDE;&#x63A5;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x589E;&#x52A0;&#x5B83;&#xFF0C;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x8FD9;&#x503C;&#x5BF9;&#x5230;&#x6765;&#x7684;TCP/IP&#x8FDE;&#x63A5;&#x7684;&#x4FA6;&#x542C;&#x961F;&#x5217;&#x7684;&#x5927;&#x5C0F;&#x3002;<br>&#x5F53;&#x89C2;&#x5BDF;&#x4F60;&#x4E3B;&#x673A;&#x8FDB;&#x7A0B;&#x5217;&#x8868;&#xFF08;mysql&gt; show full processlist&#xFF09;&#xFF0C;&#x53D1;&#x73B0;&#x5927;&#x91CF;264084 | unauthenticated user | xxx.xxx.xxx.xxx | NULL | Connect | NULL | login | NULL &#x7684;&#x5F85;&#x8FDE;&#x63A5;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x5C31;&#x8981;&#x52A0;&#x5927;back_log &#x7684;&#x503C;&#x4E86;&#x3002;<br>&#x9ED8;&#x8BA4;&#x6570;&#x503C;&#x662F;50&#xFF0C;&#x53EF;&#x8C03;&#x4F18;&#x4E3A;128&#xFF0C;&#x5BF9;&#x4E8E;Linux&#x7CFB;&#x7EDF;&#x8BBE;&#x7F6E;&#x8303;&#x56F4;&#x4E3A;&#x5C0F;&#x4E8E;512&#x7684;&#x6574;&#x6570;&#x3002;</p>
<h5 id="3-interactive-timeout"><a href="#3-interactive-timeout" class="headerlink" title="3)     interactive_timeout"></a>3)     interactive_timeout</h5><p>&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x8FDE;&#x63A5;&#x5728;&#x88AB;&#x670D;&#x52A1;&#x5668;&#x5728;&#x5173;&#x95ED;&#x524D;&#x7B49;&#x5F85;&#x884C;&#x52A8;&#x7684;&#x79D2;&#x6570;&#x3002;&#x4E00;&#x4E2A;&#x4EA4;&#x4E92;&#x7684;&#x5BA2;&#x6237;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x5BF9;mysql_real_connect()&#x4F7F;&#x7528;CLIENT_INTERACTIVE &#x9009;&#x9879;&#x7684;&#x5BA2;&#x6237;&#x3002;<br>&#x9ED8;&#x8BA4;&#x6570;&#x503C;&#x662F;28800&#xFF0C;&#x53EF;&#x8C03;&#x4F18;&#x4E3A;7200&#x3002;</p>
<h4 id="&#x7F13;&#x51B2;&#x533A;&#x53D8;&#x91CF;"><a href="#&#x7F13;&#x51B2;&#x533A;&#x53D8;&#x91CF;" class="headerlink" title="&#x7F13;&#x51B2;&#x533A;&#x53D8;&#x91CF;"></a>&#x7F13;&#x51B2;&#x533A;&#x53D8;&#x91CF;</h4><p>&#x5168;&#x5C40;&#x7F13;&#x51B2;&#xFF1A;</p>
<h5 id="4-key-buffer-size"><a href="#4-key-buffer-size" class="headerlink" title="4)     key_buffer_size"></a>4)     key_buffer_size</h5><p>key_buffer_size&#x6307;&#x5B9A;&#x7D22;&#x5F15;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x5B83;&#x51B3;&#x5B9A;&#x7D22;&#x5F15;&#x5904;&#x7406;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x7D22;&#x5F15;&#x8BFB;&#x7684;&#x901F;&#x5EA6;&#x3002;&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x72B6;&#x6001;&#x503C;Key_read_requests&#x548C;Key_reads&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;key_buffer_size&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x5408;&#x7406;&#x3002;&#x6BD4;&#x4F8B;key_reads / key_read_requests&#x5E94;&#x8BE5;&#x5C3D;&#x53EF;&#x80FD;&#x7684;&#x4F4E;&#xFF0C;&#x81F3;&#x5C11;&#x662F;1:100&#xFF0C;1:1000&#x66F4;&#x597D;&#xFF08;&#x4E0A;&#x8FF0;&#x72B6;&#x6001;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SHOW STATUS LIKE &#x2018;key_read%&#x2019;&#x83B7;&#x5F97;&#xFF09;&#x3002;</p>
<p>key_buffer_size&#x53EA;&#x5BF9;MyISAM&#x8868;&#x8D77;&#x4F5C;&#x7528;&#x3002;&#x5373;&#x4F7F;&#x4F60;&#x4E0D;&#x4F7F;&#x7528;MyISAM&#x8868;&#xFF0C;&#x4F46;&#x662F;&#x5185;&#x90E8;&#x7684;&#x4E34;&#x65F6;&#x78C1;&#x76D8;&#x8868;&#x662F;MyISAM&#x8868;&#xFF0C;&#x4E5F;&#x8981;&#x4F7F;&#x7528;&#x8BE5;&#x503C;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x68C0;&#x67E5;&#x72B6;&#x6001;&#x503C;created_tmp_disk_tables&#x5F97;&#x77E5;&#x8BE6;&#x60C5;&#x3002;</p>
<p>&#x4E3E;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;key_buffer_size&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;+</span><br><span class="line">| Variable_name | Value      |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;+&#x2014;&#x2014;&#x2014;&#x2014;+</span><br><span class="line">| key_buffer_size | 536870912 |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014; &#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;+</span><br></pre></td></tr></table></figure>

<p>key_buffer_size&#x4E3A;512MB&#xFF0C;&#x6211;&#x4EEC;&#x518D;&#x770B;&#x4E00;&#x4E0B;key_buffer_size&#x7684;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;key_read%&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;+&#x2014;&#x2014;&#x2014;&#x2014;-+</span><br><span class="line">| Variable_name   | Value    |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;+&#x2014;&#x2014;&#x2014;&#x2014;-+</span><br><span class="line">| Key_read_requests| 27813678764 |</span><br><span class="line">| Key_reads   |  6798830      |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;+&#x2014;&#x2014;&#x2014;&#x2014;-+</span><br></pre></td></tr></table></figure>

<p>&#x4E00;&#x5171;&#x6709;27813678764&#x4E2A;&#x7D22;&#x5F15;&#x8BFB;&#x53D6;&#x8BF7;&#x6C42;&#xFF0C;&#x6709;6798830&#x4E2A;&#x8BF7;&#x6C42;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x6CA1;&#x6709;&#x627E;&#x5230;&#x76F4;&#x63A5;&#x4ECE;&#x786C;&#x76D8;&#x8BFB;&#x53D6;&#x7D22;&#x5F15;&#xFF0C;&#x8BA1;&#x7B97;&#x7D22;&#x5F15;&#x672A;&#x547D;&#x4E2D;&#x7F13;&#x5B58;&#x7684;&#x6982;&#x7387;&#xFF1A;<br>key_cache_miss_rate &#xFF1D;Key_reads / Key_read_requests * 100%&#xFF0C;&#x8BBE;&#x7F6E;&#x5728;1/1000&#x5DE6;&#x53F3;&#x8F83;&#x597D;<br>&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x6570;&#x503C;&#x662F;8388600(8M)&#xFF0C;&#x4E3B;&#x673A;&#x6709;4GB&#x5185;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x8C03;&#x4F18;&#x503C;&#x4E3A;268435456(256MB)&#x3002;</p>
<h5 id="5-query-cache-size"><a href="#5-query-cache-size" class="headerlink" title="5)     query_cache_size"></a>5)     query_cache_size</h5><p>&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#xFF0C;MySQL&#x5C06;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x5B58;&#x653E;&#x5728;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#xFF0C;&#x4ECA;&#x540E;&#x5BF9;&#x4E8E;&#x540C;&#x6837;&#x7684;SELECT&#x8BED;&#x53E5;&#xFF08;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;&#xFF09;&#xFF0C;&#x5C06;&#x76F4;&#x63A5;&#x4ECE;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x8BFB;&#x53D6;&#x7ED3;&#x679C;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x72B6;&#x6001;&#x503C;Qcache_*&#xFF0C;&#x53EF;&#x4EE5;&#x77E5;&#x9053;query_cache_size&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x5408;&#x7406;&#xFF08;&#x4E0A;&#x8FF0;&#x72B6;&#x6001;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SHOW STATUS LIKE &#x2018;Qcache%&#x2019;&#x83B7;&#x5F97;&#xFF09;&#x3002;&#x5982;&#x679C;Qcache_lowmem_prunes&#x7684;&#x503C;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x5219;&#x8868;&#x660E;&#x7ECF;&#x5E38;&#x51FA;&#x73B0;&#x7F13;&#x51B2;&#x4E0D;&#x591F;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x679C;Qcache_hits&#x7684;&#x503C;&#x4E5F;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x5219;&#x8868;&#x660E;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#x4F7F;&#x7528;&#x975E;&#x5E38;&#x9891;&#x7E41;&#xFF0C;&#x6B64;&#x65F6;&#x9700;&#x8981;&#x589E;&#x52A0;&#x7F13;&#x51B2;&#x5927;&#x5C0F;&#xFF1B;&#x5982;&#x679C;Qcache_hits&#x7684;&#x503C;&#x4E0D;&#x5927;&#xFF0C;&#x5219;&#x8868;&#x660E;&#x4F60;&#x7684;&#x67E5;&#x8BE2;&#x91CD;&#x590D;&#x7387;&#x5F88;&#x4F4E;&#xFF0C;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#x53CD;&#x800C;&#x4F1A;&#x5F71;&#x54CD;&#x6548;&#x7387;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x4E0D;&#x7528;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5728;SELECT&#x8BED;&#x53E5;&#x4E2D;&#x52A0;&#x5165;SQL_NO_CACHE&#x53EF;&#x4EE5;&#x660E;&#x786E;&#x8868;&#x793A;&#x4E0D;&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#x3002;</p>
<p>&#x4E0E;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#x6709;&#x5173;&#x7684;&#x53C2;&#x6570;&#x8FD8;&#x6709;query_cache_type&#x3001;query_cache_limit&#x3001;query_cache_min_res_unit&#x3002;</p>
<ul>
<li>query_cache_type&#x6307;&#x5B9A;&#x662F;&#x5426;&#x4F7F;&#x7528;&#x67E5;&#x8BE2;&#x7F13;&#x51B2;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;0&#x3001;1&#x3001;2&#xFF0C;&#x8BE5;&#x53D8;&#x91CF;&#x662F;SESSION&#x7EA7;&#x7684;&#x53D8;&#x91CF;&#x3002;</li>
<li>query_cache_limit&#x6307;&#x5B9A;&#x5355;&#x4E2A;&#x67E5;&#x8BE2;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#xFF0C;&#x7F3A;&#x7701;&#x4E3A;1M&#x3002;</li>
<li>query_cache_min_res_unit&#x662F;&#x5728;4.1&#x7248;&#x672C;&#x4EE5;&#x540E;&#x5F15;&#x5165;&#x7684;&#xFF0C;&#x5B83;&#x6307;&#x5B9A;&#x5206;&#x914D;&#x7F13;&#x51B2;&#x533A;&#x7A7A;&#x95F4;&#x7684;&#x6700;&#x5C0F;&#x5355;&#x4F4D;&#xFF0C;&#x7F3A;&#x7701;&#x4E3A;4K&#x3002;&#x68C0;&#x67E5;&#x72B6;&#x6001;&#x503C;Qcache_free_blocks&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x503C;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x5219;&#x8868;&#x660E;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x788E;&#x7247;&#x5F88;&#x591A;&#xFF0C;&#x8FD9;&#x5C31;&#x8868;&#x660E;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x90FD;&#x6BD4;&#x8F83;&#x5C0F;&#xFF0C;&#x6B64;&#x65F6;&#x9700;&#x8981;&#x51CF;&#x5C0F;query_cache_min_res_unit&#x3002;</li>
</ul>
<p>&#x4E3E;&#x4F8B;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;qcache%&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+</span><br><span class="line">| Variable_name                  | Value        |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+</span><br><span class="line">| Qcache_free_blocks        | 22756       |</span><br><span class="line">| Qcache_free_memory     | 76764704    |</span><br><span class="line">| Qcache_hits           | 213028692 |</span><br><span class="line">| Qcache_inserts         | 208894227   |</span><br><span class="line">| Qcache_lowmem_prunes   | 4010916      |</span><br><span class="line">| Qcache_not_cached | 13385031    |</span><br><span class="line">| Qcache_queries_in_cache | 43560 |</span><br><span class="line">| Qcache_total_blocks          | 111212      |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+</span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &apos;query_cache%&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+</span><br><span class="line">| Variable_name            | Value      |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;&#x2014;&#x2013;+</span><br><span class="line">| query_cache_limit         | 2097152     |</span><br><span class="line">| query_cache_min_res_unit      | 4096    |</span><br><span class="line">| query_cache_size         | 203423744 |</span><br><span class="line">| query_cache_type        | ON           |</span><br><span class="line">| query_cache_wlock_invalidate | OFF   |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;+</span><br></pre></td></tr></table></figure>

<p>&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x788E;&#x7247;&#x7387;= Qcache_free_blocks / Qcache_total_blocks * 100%<br>&#x5982;&#x679C;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x788E;&#x7247;&#x7387;&#x8D85;&#x8FC7;20%&#xFF0C;&#x53EF;&#x4EE5;&#x7528;FLUSH QUERY CACHE&#x6574;&#x7406;&#x7F13;&#x5B58;&#x788E;&#x7247;&#xFF0C;&#x6216;&#x8005;&#x8BD5;&#x8BD5;&#x51CF;&#x5C0F;query_cache_min_res_unit&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x7684;&#x67E5;&#x8BE2;&#x90FD;&#x662F;&#x5C0F;&#x6570;&#x636E;&#x91CF;&#x7684;&#x8BDD;&#x3002;<br>&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x5229;&#x7528;&#x7387;= (query_cache_size &#x2013; Qcache_free_memory) / query_cache_size * 100%<br>&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x5229;&#x7528;&#x7387;&#x5728;25%&#x4EE5;&#x4E0B;&#x7684;&#x8BDD;&#x8BF4;&#x660E;query_cache_size&#x8BBE;&#x7F6E;&#x7684;&#x8FC7;&#x5927;&#xFF0C;&#x53EF;&#x9002;&#x5F53;&#x51CF;&#x5C0F;&#xFF1B;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x5229;&#x7528;&#x7387;&#x5728;80&#xFF05;&#x4EE5;&#x4E0A;&#x800C;&#x4E14;Qcache_lowmem_prunes &gt; 50&#x7684;&#x8BDD;&#x8BF4;&#x660E;query_cache_size&#x53EF;&#x80FD;&#x6709;&#x70B9;&#x5C0F;&#xFF0C;&#x8981;&#x4E0D;&#x5C31;&#x662F;&#x788E;&#x7247;&#x592A;&#x591A;&#x3002;<br>&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7387;= (Qcache_hits &#x2013; Qcache_inserts) / Qcache_hits * 100%<br>&#x793A;&#x4F8B;&#x670D;&#x52A1;&#x5668;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x788E;&#x7247;&#x7387;&#xFF1D;20.46&#xFF05;&#xFF0C;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x5229;&#x7528;&#x7387;&#xFF1D;62.26&#xFF05;&#xFF0C;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x547D;&#x4E2D;&#x7387;&#xFF1D;1.94&#xFF05;&#xFF0C;&#x547D;&#x4E2D;&#x7387;&#x5F88;&#x5DEE;&#xFF0C;&#x53EF;&#x80FD;&#x5199;&#x64CD;&#x4F5C;&#x6BD4;&#x8F83;&#x9891;&#x7E41;&#x5427;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x80FD;&#x6709;&#x4E9B;&#x788E;&#x7247;&#x3002;</p>
<p>&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x7684;&#x7F13;&#x51B2;</p>
<h5 id="6-record-buffer-size"><a href="#6-record-buffer-size" class="headerlink" title="6)    record_buffer_size"></a>6)    record_buffer_size</h5><p>&#x6BCF;&#x4E2A;&#x8FDB;&#x884C;&#x4E00;&#x4E2A;&#x987A;&#x5E8F;&#x626B;&#x63CF;&#x7684;&#x7EBF;&#x7A0B;&#x4E3A;&#x5176;&#x626B;&#x63CF;&#x7684;&#x6BCF;&#x5F20;&#x8868;&#x5206;&#x914D;&#x8FD9;&#x4E2A;&#x5927;&#x5C0F;&#x7684;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x3002;&#x5982;&#x679C;&#x4F60;&#x505A;&#x5F88;&#x591A;&#x987A;&#x5E8F;&#x626B;&#x63CF;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x60F3;&#x8981;&#x589E;&#x52A0;&#x8BE5;&#x503C;&#x3002;<br>&#x9ED8;&#x8BA4;&#x6570;&#x503C;&#x662F;131072(128K)&#xFF0C;&#x53EF;&#x6539;&#x4E3A;16773120 (16M)</p>
<h5 id="7-read-rnd-buffer-size"><a href="#7-read-rnd-buffer-size" class="headerlink" title="7)     read_rnd_buffer_size"></a>7)     read_rnd_buffer_size</h5><p>&#x968F;&#x673A;&#x8BFB;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x3002;&#x5F53;&#x6309;&#x4EFB;&#x610F;&#x987A;&#x5E8F;&#x8BFB;&#x53D6;&#x884C;&#x65F6;(&#x4F8B;&#x5982;&#xFF0C;&#x6309;&#x7167;&#x6392;&#x5E8F;&#x987A;&#x5E8F;)&#xFF0C;&#x5C06;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x8BFB;&#x7F13;&#x5B58;&#x533A;&#x3002;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x67E5;&#x8BE2;&#x65F6;&#xFF0C;MySQL&#x4F1A;&#x9996;&#x5148;&#x626B;&#x63CF;&#x4E00;&#x904D;&#x8BE5;&#x7F13;&#x51B2;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x78C1;&#x76D8;&#x641C;&#x7D22;&#xFF0C;&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x9700;&#x8981;&#x6392;&#x5E8F;&#x5927;&#x91CF;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x9002;&#x5F53;&#x8C03;&#x9AD8;&#x8BE5;&#x503C;&#x3002;&#x4F46;MySQL&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;&#x5BA2;&#x6237;&#x8FDE;&#x63A5;&#x53D1;&#x653E;&#x8BE5;&#x7F13;&#x51B2;&#x7A7A;&#x95F4;&#xFF0C;&#x6240;&#x4EE5;&#x5E94;&#x5C3D;&#x91CF;&#x9002;&#x5F53;&#x8BBE;&#x7F6E;&#x8BE5;&#x503C;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x5185;&#x5B58;&#x5F00;&#x9500;&#x8FC7;&#x5927;&#x3002;<br>&#x4E00;&#x822C;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;16M</p>
<h5 id="8-sort-buffer-size"><a href="#8-sort-buffer-size" class="headerlink" title="8)     sort_buffer_size"></a>8)     sort_buffer_size</h5><p>&#x6BCF;&#x4E2A;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x7684;&#x7EBF;&#x7A0B;&#x5206;&#x914D;&#x8BE5;&#x5927;&#x5C0F;&#x7684;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#x3002;&#x589E;&#x52A0;&#x8FD9;&#x503C;&#x52A0;&#x901F;ORDER BY&#x6216;GROUP BY&#x64CD;&#x4F5C;&#x3002;<br>&#x9ED8;&#x8BA4;&#x6570;&#x503C;&#x662F;2097144(2M)&#xFF0C;&#x53EF;&#x6539;&#x4E3A;16777208 (16M)&#x3002;</p>
<h5 id="9-join-buffer-size"><a href="#9-join-buffer-size" class="headerlink" title="9)     join_buffer_size"></a>9)     join_buffer_size</h5><p>&#x8054;&#x5408;&#x67E5;&#x8BE2;&#x64CD;&#x4F5C;&#x6240;&#x80FD;&#x4F7F;&#x7528;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;<br>record_buffer_size&#xFF0C;read_rnd_buffer_size&#xFF0C;sort_buffer_size&#xFF0C;join_buffer_size&#x4E3A;&#x6BCF;&#x4E2A;&#x7EBF;&#x7A0B;&#x72EC;&#x5360;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x6709;100&#x4E2A;&#x7EBF;&#x7A0B;&#x8FDE;&#x63A5;&#xFF0C;&#x5219;&#x5360;&#x7528;&#x4E3A;16M*100</p>
<h5 id="10-table-cache"><a href="#10-table-cache" class="headerlink" title="10)  table_cache"></a>10)  table_cache</h5><p>&#x8868;&#x9AD8;&#x901F;&#x7F13;&#x5B58;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x6BCF;&#x5F53;MySQL&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x8868;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x8868;&#x7F13;&#x51B2;&#x533A;&#x4E2D;&#x8FD8;&#x6709;&#x7A7A;&#x95F4;&#xFF0C;&#x8BE5;&#x8868;&#x5C31;&#x88AB;&#x6253;&#x5F00;&#x5E76;&#x653E;&#x5165;&#x5176;&#x4E2D;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x66F4;&#x5FEB;&#x5730;&#x8BBF;&#x95EE;&#x8868;&#x5185;&#x5BB9;&#x3002;&#x901A;&#x8FC7;&#x68C0;&#x67E5;&#x5CF0;&#x503C;&#x65F6;&#x95F4;&#x7684;&#x72B6;&#x6001;&#x503C;Open_tables&#x548C;Opened_tables&#xFF0C;&#x53EF;&#x4EE5;&#x51B3;&#x5B9A;&#x662F;&#x5426;&#x9700;&#x8981;&#x589E;&#x52A0;table_cache&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x4F60;&#x53D1;&#x73B0;open_tables&#x7B49;&#x4E8E;table_cache&#xFF0C;&#x5E76;&#x4E14;opened_tables&#x5728;&#x4E0D;&#x65AD;&#x589E;&#x957F;&#xFF0C;&#x90A3;&#x4E48;&#x4F60;&#x5C31;&#x9700;&#x8981;&#x589E;&#x52A0;table_cache&#x7684;&#x503C;&#x4E86;&#xFF08;&#x4E0A;&#x8FF0;&#x72B6;&#x6001;&#x503C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SHOW STATUS LIKE &#x2018;Open%tables&#x2019;&#x83B7;&#x5F97;&#xFF09;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x80FD;&#x76F2;&#x76EE;&#x5730;&#x628A;table_cache&#x8BBE;&#x7F6E;&#x6210;&#x5F88;&#x5927;&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x5F97;&#x592A;&#x9AD8;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x4E0D;&#x8DB3;&#xFF0C;&#x4ECE;&#x800C;&#x9020;&#x6210;&#x6027;&#x80FD;&#x4E0D;&#x7A33;&#x5B9A;&#x6216;&#x8005;&#x8FDE;&#x63A5;&#x5931;&#x8D25;&#x3002;<br>1G&#x5185;&#x5B58;&#x673A;&#x5668;&#xFF0C;&#x63A8;&#x8350;&#x503C;&#x662F;128&#xFF0D;256&#x3002;&#x5185;&#x5B58;&#x5728;4GB&#x5DE6;&#x53F3;&#x7684;&#x670D;&#x52A1;&#x5668;&#x8BE5;&#x53C2;&#x6570;&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;256M&#x6216;384M&#x3002;</p>
<h5 id="11-max-heap-table-size"><a href="#11-max-heap-table-size" class="headerlink" title="11)  max_heap_table_size"></a>11)  max_heap_table_size</h5><p>&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x7684;&#x5185;&#x5B58;&#x8868;(memory table)&#x7684;&#x5927;&#x5C0F;&#x3002;&#x8FD9;&#x4E2A;&#x503C;&#x7528;&#x6765;&#x8BA1;&#x7B97;&#x5185;&#x5B58;&#x8868;&#x7684;&#x6700;&#x5927;&#x884C;&#x6570;&#x503C;&#x3002;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x652F;&#x6301;&#x52A8;&#x6001;&#x6539;&#x53D8;&#xFF0C;&#x5373;set @max_heap_table_size=#<br>&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x548C;tmp_table_size&#x4E00;&#x8D77;&#x9650;&#x5236;&#x4E86;&#x5185;&#x90E8;&#x5185;&#x5B58;&#x8868;&#x7684;&#x5927;&#x5C0F;&#x3002;&#x5982;&#x679C;&#x67D0;&#x4E2A;&#x5185;&#x90E8;heap&#xFF08;&#x5806;&#x79EF;&#xFF09;&#x8868;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;tmp_table_size&#xFF0C;MySQL&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x81EA;&#x52A8;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;heap&#x8868;&#x6539;&#x4E3A;&#x57FA;&#x4E8E;&#x786C;&#x76D8;&#x7684;MyISAM&#x8868;&#x3002;</p>
<h5 id="12-tmp-table-size"><a href="#12-tmp-table-size" class="headerlink" title="12)  tmp_table_size"></a>12)  tmp_table_size</h5><p>&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;tmp_table_size&#x9009;&#x9879;&#x6765;&#x589E;&#x52A0;&#x4E00;&#x5F20;&#x4E34;&#x65F6;&#x8868;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x4F8B;&#x5982;&#x505A;&#x9AD8;&#x7EA7;GROUP BY&#x64CD;&#x4F5C;&#x751F;&#x6210;&#x7684;&#x4E34;&#x65F6;&#x8868;&#x3002;&#x5982;&#x679C;&#x8C03;&#x9AD8;&#x8BE5;&#x503C;&#xFF0C;MySQL&#x540C;&#x65F6;&#x5C06;&#x589E;&#x52A0;heap&#x8868;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x53EF;&#x8FBE;&#x5230;&#x63D0;&#x9AD8;&#x8054;&#x63A5;&#x67E5;&#x8BE2;&#x901F;&#x5EA6;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x5EFA;&#x8BAE;&#x5C3D;&#x91CF;&#x4F18;&#x5316;&#x67E5;&#x8BE2;&#xFF0C;&#x8981;&#x786E;&#x4FDD;&#x67E5;&#x8BE2;&#x8FC7;&#x7A0B;&#x4E2D;&#x751F;&#x6210;&#x7684;&#x4E34;&#x65F6;&#x8868;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x907F;&#x514D;&#x4E34;&#x65F6;&#x8868;&#x8FC7;&#x5927;&#x5BFC;&#x81F4;&#x751F;&#x6210;&#x57FA;&#x4E8E;&#x786C;&#x76D8;&#x7684;MyISAM&#x8868;&#x3002;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;created_tmp%&apos;;</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;&#x2014;+</span><br><span class="line">| Variable_name             | Value |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;-+&#x2014;&#x2014;&#x2014;+</span><br><span class="line">| Created_tmp_disk_tables | 21197  |</span><br><span class="line">| Created_tmp_files   | 58  |</span><br><span class="line">| Created_tmp_tables  | 1771587 |</span><br><span class="line">+&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2013;+&#x2014;&#x2014;&#x2014;&#x2013;+</span><br></pre></td></tr></table></figure>

<p>&#x6BCF;&#x6B21;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x8868;&#xFF0C;Created_tmp_tables&#x589E;&#x52A0;&#xFF0C;&#x5982;&#x679C;&#x4E34;&#x65F6;&#x8868;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;tmp_table_size&#xFF0C;&#x5219;&#x662F;&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x8868;&#xFF0C;Created_tmp_disk_tables&#x4E5F;&#x589E;&#x52A0;,Created_tmp_files&#x8868;&#x793A;MySQL&#x670D;&#x52A1;&#x521B;&#x5EFA;&#x7684;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x6587;&#x4EF6;&#x6570;&#xFF0C;&#x6BD4;&#x8F83;&#x7406;&#x60F3;&#x7684;&#x914D;&#x7F6E;&#x662F;&#xFF1A;<br>Created_tmp_disk_tables / Created_tmp_tables * 100% &lt;= 25%&#x6BD4;&#x5982;&#x4E0A;&#x9762;&#x7684;&#x670D;&#x52A1;&#x5668;Created_tmp_disk_tables / Created_tmp_tables * 100% &#xFF1D;1.20%&#xFF0C;&#x5E94;&#x8BE5;&#x76F8;&#x5F53;&#x597D;&#x4E86;</p>
<p>&#x9ED8;&#x8BA4;&#x4E3A;16M&#xFF0C;&#x53EF;&#x8C03;&#x5230;64-256&#x6700;&#x4F73;&#xFF0C;&#x7EBF;&#x7A0B;&#x72EC;&#x5360;&#xFF0C;&#x592A;&#x5927;&#x53EF;&#x80FD;&#x5185;&#x5B58;&#x4E0D;&#x591F;I/O&#x5835;&#x585E;</p>
<h5 id="13-thread-cache-size"><a href="#13-thread-cache-size" class="headerlink" title="13)  thread_cache_size"></a>13)  thread_cache_size</h5><p>&#x53EF;&#x4EE5;&#x590D;&#x7528;&#x7684;&#x4FDD;&#x5B58;&#x5728;&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x7684;&#x6570;&#x91CF;&#x3002;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#x4ECE;&#x7F13;&#x5B58;&#x4E2D;&#x53D6;&#x5F97;&#xFF0C;&#x5F53;&#x65AD;&#x5F00;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x5982;&#x679C;&#x6709;&#x7A7A;&#x95F4;&#xFF0C;&#x5BA2;&#x6237;&#x7684;&#x7EBF;&#x7F6E;&#x5728;&#x7F13;&#x5B58;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x6709;&#x5F88;&#x591A;&#x65B0;&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x4E3A;&#x4E86;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#x53EF;&#x4EE5;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x503C;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x6BD4;&#x8F83; Connections&#x548C;Threads_created&#x72B6;&#x6001;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x7684;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#x4E3A;110&#xFF0C;&#x53EF;&#x8C03;&#x4F18;&#x4E3A;80&#x3002;</p>
<h5 id="14-thread-concurrency"><a href="#14-thread-concurrency" class="headerlink" title="14)  thread_concurrency"></a>14)  thread_concurrency</h5><p>&#x63A8;&#x8350;&#x8BBE;&#x7F6E;&#x4E3A;&#x670D;&#x52A1;&#x5668; CPU&#x6838;&#x6570;&#x7684;2&#x500D;&#xFF0C;&#x4F8B;&#x5982;&#x53CC;&#x6838;&#x7684;CPU, &#x90A3;&#x4E48;thread_concurrency&#x7684;&#x5E94;&#x8BE5;&#x4E3A;4&#xFF1B;2&#x4E2A;&#x53CC;&#x6838;&#x7684;cpu, thread_concurrency&#x7684;&#x503C;&#x5E94;&#x4E3A;8&#x3002;&#x9ED8;&#x8BA4;&#x4E3A;8</p>
<h5 id="15-wait-timeout"><a href="#15-wait-timeout" class="headerlink" title="15)  wait_timeout"></a>15)  wait_timeout</h5><p>&#x6307;&#x5B9A;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x65F6;&#x95F4;&#xFF0C;&#x5BF9;&#x4E8E;4GB&#x5DE6;&#x53F3;&#x5185;&#x5B58;&#x7684;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;5-10&#x3002;</p>
<h4 id="&#x914D;&#x7F6E;InnoDB&#x7684;&#x51E0;&#x4E2A;&#x53D8;&#x91CF;"><a href="#&#x914D;&#x7F6E;InnoDB&#x7684;&#x51E0;&#x4E2A;&#x53D8;&#x91CF;" class="headerlink" title="&#x914D;&#x7F6E;InnoDB&#x7684;&#x51E0;&#x4E2A;&#x53D8;&#x91CF;"></a>&#x914D;&#x7F6E;InnoDB&#x7684;&#x51E0;&#x4E2A;&#x53D8;&#x91CF;</h4><h5 id="innodb-buffer-pool-size"><a href="#innodb-buffer-pool-size" class="headerlink" title="innodb_buffer_pool_size"></a>innodb_buffer_pool_size</h5><p>&#x5BF9;&#x4E8E;InnoDB&#x8868;&#x6765;&#x8BF4;&#xFF0C;innodb_buffer_pool_size&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x76F8;&#x5F53;&#x4E8E;key_buffer_size&#x5BF9;&#x4E8E;MyISAM&#x8868;&#x7684;&#x4F5C;&#x7528;&#x4E00;&#x6837;&#x3002;InnoDB&#x4F7F;&#x7528;&#x8BE5;&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x5185;&#x5B58;&#x6765;&#x7F13;&#x51B2;&#x6570;&#x636E;&#x548C;&#x7D22;&#x5F15;&#x3002;&#x5BF9;&#x4E8E;&#x5355;&#x72EC;&#x7684;MySQL&#x6570;&#x636E;&#x5E93;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x6700;&#x5927;&#x53EF;&#x4EE5;&#x628A;&#x8BE5;&#x503C;&#x8BBE;&#x7F6E;&#x6210;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684;80%&#x3002;<br>&#x6839;&#x636E;MySQL&#x624B;&#x518C;&#xFF0C;&#x5BF9;&#x4E8E;2G&#x5185;&#x5B58;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x63A8;&#x8350;&#x503C;&#x662F;1G&#xFF08;50%&#xFF09;&#x3002;</p>
<h5 id="innodb-flush-log-at-trx-commit"><a href="#innodb-flush-log-at-trx-commit" class="headerlink" title="innodb_flush_log_at_trx_commit"></a>innodb_flush_log_at_trx_commit</h5><p>&#x4E3B;&#x8981;&#x63A7;&#x5236;&#x4E86;innodb&#x5C06;log buffer&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5E76;flush&#x78C1;&#x76D8;&#x7684;&#x65F6;&#x95F4;&#x70B9;&#xFF0C;&#x53D6;&#x503C;&#x5206;&#x522B;&#x4E3A;0&#x3001;1&#x3001;2&#x4E09;&#x4E2A;&#x3002;</p>
<ul>
<li>0&#xFF0C;&#x8868;&#x793A;&#x5F53;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x65F6;&#xFF0C;&#x4E0D;&#x505A;&#x65E5;&#x5FD7;&#x5199;&#x5165;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x662F;&#x6BCF;&#x79D2;&#x949F;&#x5C06;log buffer&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5E76;flush&#x78C1;&#x76D8;&#x4E00;&#x6B21;&#xFF1B;</li>
<li>1&#xFF0C;&#x5219;&#x5728;&#x6BCF;&#x79D2;&#x949F;&#x6216;&#x662F;&#x6BCF;&#x6B21;&#x4E8B;&#x7269;&#x7684;&#x63D0;&#x4EA4;&#x90FD;&#x4F1A;&#x5F15;&#x8D77;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5199;&#x5165;&#x3001;flush&#x78C1;&#x76D8;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x786E;&#x4FDD;&#x4E86;&#x4E8B;&#x52A1;&#x7684;ACID&#xFF1B;</li>
<li>2&#xFF0C;&#x6BCF;&#x6B21;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x5F15;&#x8D77;&#x5199;&#x5165;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x52A8;&#x4F5C;&#xFF0C;&#x4F46;&#x6BCF;&#x79D2;&#x949F;&#x5B8C;&#x6210;&#x4E00;&#x6B21;flush&#x78C1;&#x76D8;&#x64CD;&#x4F5C;&#x3002;</li>
</ul>
<p>&#x5B9E;&#x9645;&#x6D4B;&#x8BD5;&#x53D1;&#x73B0;&#xFF0C;&#x8BE5;&#x503C;&#x5BF9;&#x63D2;&#x5165;&#x6570;&#x636E;&#x7684;&#x901F;&#x5EA6;&#x5F71;&#x54CD;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;2&#x65F6;&#x63D2;&#x5165;10000&#x6761;&#x8BB0;&#x5F55;&#x53EA;&#x9700;&#x8981;2&#x79D2;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;0&#x65F6;&#x53EA;&#x9700;&#x8981;1&#x79D2;&#xFF0C;&#x800C;&#x8BBE;&#x7F6E;&#x4E3A;1&#x65F6;&#x5219;&#x9700;&#x8981;229&#x79D2;&#x3002;&#x56E0;&#x6B64;&#xFF0C;MySQL&#x624B;&#x518C;&#x4E5F;&#x5EFA;&#x8BAE;&#x5C3D;&#x91CF;&#x5C06;&#x63D2;&#x5165;&#x64CD;&#x4F5C;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x4E8B;&#x52A1;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x63D0;&#x9AD8;&#x901F;&#x5EA6;&#x3002;<br>&#x6839;&#x636E;MySQL&#x624B;&#x518C;&#xFF0C;&#x5728;&#x5141;&#x8BB8;&#x4E22;&#x5931;&#x6700;&#x8FD1;&#x90E8;&#x5206;&#x4E8B;&#x52A1;&#x7684;&#x5371;&#x9669;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x53EF;&#x4EE5;&#x628A;&#x8BE5;&#x503C;&#x8BBE;&#x4E3A;0&#x6216;2&#x3002;</p>
<h5 id="innodb-log-buffer-size"><a href="#innodb-log-buffer-size" class="headerlink" title="innodb_log_buffer_size"></a>innodb_log_buffer_size</h5><p>log&#x7F13;&#x5B58;&#x5927;&#x5C0F;&#xFF0C;&#x4E00;&#x822C;&#x4E3A;1-8M&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;1M&#xFF0C;&#x5BF9;&#x4E8E;&#x8F83;&#x5927;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x53EF;&#x4EE5;&#x589E;&#x5927;&#x7F13;&#x5B58;&#x5927;&#x5C0F;&#x3002;<br>&#x53EF;&#x8BBE;&#x7F6E;&#x4E3A;4M&#x6216;8M&#x3002;</p>
<h5 id="innodb-additional-mem-pool-size"><a href="#innodb-additional-mem-pool-size" class="headerlink" title="innodb_additional_mem_pool_size"></a>innodb_additional_mem_pool_size</h5><p>&#x8BE5;&#x53C2;&#x6570;&#x6307;&#x5B9A;InnoDB&#x7528;&#x6765;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5B57;&#x5178;&#x548C;&#x5176;&#x4ED6;&#x5185;&#x90E8;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x5185;&#x5B58;&#x6C60;&#x5927;&#x5C0F;&#x3002;&#x7F3A;&#x7701;&#x503C;&#x662F;1M&#x3002;&#x901A;&#x5E38;&#x4E0D;&#x7528;&#x592A;&#x5927;&#xFF0C;&#x53EA;&#x8981;&#x591F;&#x7528;&#x5C31;&#x884C;&#xFF0C;&#x5E94;&#x8BE5;&#x4E0E;&#x8868;&#x7ED3;&#x6784;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x6709;&#x5173;&#x7CFB;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x591F;&#x7528;&#xFF0C;MySQL&#x4F1A;&#x5728;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x4E2D;&#x5199;&#x5165;&#x4E00;&#x6761;&#x8B66;&#x544A;&#x4FE1;&#x606F;&#x3002;<br>&#x6839;&#x636E;MySQL&#x624B;&#x518C;&#xFF0C;&#x5BF9;&#x4E8E;2G&#x5185;&#x5B58;&#x7684;&#x673A;&#x5668;&#xFF0C;&#x63A8;&#x8350;&#x503C;&#x662F;20M&#xFF0C;&#x53EF;&#x9002;&#x5F53;&#x589E;&#x52A0;&#x3002;</p>
<h5 id="innodb-thread-concurrency-8"><a href="#innodb-thread-concurrency-8" class="headerlink" title="innodb_thread_concurrency=8"></a>innodb_thread_concurrency=8</h5><p>&#x63A8;&#x8350;&#x8BBE;&#x7F6E;&#x4E3A; 2*(NumCPUs+NumDisks)&#xFF0C;&#x9ED8;&#x8BA4;&#x4E00;&#x822C;&#x4E3A;8</p>
<h3 id="&#x8BBE;&#x7F6E;innodb-buffer-pool-size&#x5927;&#x5C0F;"><a href="#&#x8BBE;&#x7F6E;innodb-buffer-pool-size&#x5927;&#x5C0F;" class="headerlink" title="&#x8BBE;&#x7F6E;innodb_buffer_pool_size&#x5927;&#x5C0F;"></a>&#x8BBE;&#x7F6E;innodb_buffer_pool_size&#x5927;&#x5C0F;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global variables like &apos;innodb_buffer_pool_size&apos;;</span><br><span class="line">+-------------------------+-----------+</span><br><span class="line">| Variable_name           | Value     |</span><br><span class="line">+-------------------------+-----------+</span><br><span class="line">| innodb_buffer_pool_size | 134217728 |</span><br><span class="line">+-------------------------+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>&#x90A3;&#x4E48;&#x5982;&#x4F55;&#x8BBE;&#x7F6E;&#x8BE5;&#x53C2;&#x6570;&#x5927;&#x5C0F;&#x5462;&#xFF1F;&#x9996;&#x5148;&#x67E5;&#x770B;&#x8FD0;&#x884C;&#x65F6;buffer pool&#x76F8;&#x5173;&#x6570;&#x636E;&#x6307;&#x6807;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;Innodb_buffer_pool_pages_data&apos;;</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| Variable_name                 | Value |</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">| Innodb_buffer_pool_pages_data | 314   |</span><br><span class="line">+-------------------------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show global status like &apos;Innodb_buffer_pool_pages_total&apos;;</span><br><span class="line">+--------------------------------+-------+</span><br><span class="line">| Variable_name                  | Value |</span><br><span class="line">+--------------------------------+-------+</span><br><span class="line">| Innodb_buffer_pool_pages_total | 8191  |</span><br><span class="line">+--------------------------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show global status like &apos;Innodb_page_size&apos;;</span><br><span class="line">+------------------+-------+</span><br><span class="line">| Variable_name    | Value |</span><br><span class="line">+------------------+-------+</span><br><span class="line">| Innodb_page_size | 16384 |</span><br><span class="line">+------------------+-------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>&#x4E0A;&#x8FF0;&#x4E09;&#x9879;&#x6307;&#x6807;&#x7684;&#x542B;&#x4E49;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Innodb_buffer_pool_pages_data</span><br><span class="line">The number of pages in the InnoDB buffer pool containing data. The number includes both dirty and</span><br><span class="line">clean pages.</span><br><span class="line"></span><br><span class="line">Innodb_buffer_pool_pages_total</span><br><span class="line">The total size of the InnoDB buffer pool, in pages.</span><br><span class="line"></span><br><span class="line">Innodb_page_size</span><br><span class="line">InnoDB page size (default 16KB). Many values are counted in pages; the page size enables them to be</span><br><span class="line">easily converted to bytes</span><br></pre></td></tr></table></figure>

<p>&#x8BA1;&#x7B97;Innodb_buffer_pool_pages_data/Innodb_buffer_pool_pages_total<em>100%<br>&#x5F53;&#x7ED3;&#x679C; &gt; 95% &#x5219;&#x589E;&#x52A0; innodb_buffer_pool_size&#xFF0C; &#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x7269;&#x7406;&#x5185;&#x5B58;&#x7684; 75%<br>&#x5F53;&#x7ED3;&#x679C; &lt; 95% &#x5219;&#x51CF;&#x5C11; innodb_buffer_pool_size&#xFF0C;<br>&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5927;&#x5C0F;&#x4E3A;&#xFF1A; Innodb_buffer_pool_pages_data</em> Innodb_page_size * 1.05 / (1024<em>1024</em>1024)</p>
<h3 id="&#x8BBE;&#x7F6E;max-connections&#x5927;&#x5C0F;"><a href="#&#x8BBE;&#x7F6E;max-connections&#x5927;&#x5C0F;" class="headerlink" title="&#x8BBE;&#x7F6E;max_connections&#x5927;&#x5C0F;"></a>&#x8BBE;&#x7F6E;max_connections&#x5927;&#x5C0F;</h3><p>MySQL&#x670D;&#x52A1;&#x5668;&#x7684;&#x8FDE;&#x63A5;&#x6570;&#x5E76;&#x4E0D;&#x662F;&#x8981;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x7684;100%&#x4E3A;&#x597D;&#xFF0C;&#x8FD8;&#x662F;&#x8981;&#x5177;&#x4F53;&#x95EE;&#x9898;&#x5177;&#x4F53;&#x5206;&#x6790;&#xFF0C;&#x4E0B;&#x9762;&#x5C31;&#x5BF9;MySQL&#x670D;&#x52A1;&#x5668;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x7684;&#x5408;&#x7406;&#x8BBE;&#x7F6E;&#x8FDB;&#x884C;&#x4E86;&#x8BE6;&#x5C3D;&#x7684;&#x5206;&#x6790;&#xFF0C;&#x4F9B;&#x60A8;&#x53C2;&#x8003;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x89C1;&#x201C;MySQL: ERROR 1040: Too many connections&#x201D;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E00;&#x79CD;&#x662F;&#x8BBF;&#x95EE;&#x91CF;&#x786E;&#x5B9E;&#x5F88;&#x9AD8;&#xFF0C;MySQL&#x670D;&#x52A1;&#x5668;&#x6297;&#x4E0D;&#x4F4F;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5C31;&#x8981;&#x8003;&#x8651;&#x589E;&#x52A0;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x5206;&#x6563;&#x8BFB;&#x538B;&#x529B;&#xFF0C;&#x53E6;&#x5916;&#x4E00;&#x79CD;&#x60C5;&#x51B5;&#x662F;MySQL&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;max_connections&#x503C;&#x8FC7;&#x5C0F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &apos;max_connections&apos;;</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| Variable_name | Value |</span><br><span class="line">+-----------------+-------+</span><br><span class="line">| max_connections | 256 |</span><br><span class="line">+-----------------+-------+</span><br></pre></td></tr></table></figure>

<p>&#x8FD9;&#x53F0;MySQL&#x670D;&#x52A1;&#x5668;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x662F;256&#xFF0C;&#x7136;&#x540E;&#x67E5;&#x8BE2;&#x4E00;&#x4E0B;&#x670D;&#x52A1;&#x5668;&#x54CD;&#x5E94;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show global status like &apos;Max_used_connections&apos;;</span><br></pre></td></tr></table></figure>

<p>MySQL&#x670D;&#x52A1;&#x5668;&#x8FC7;&#x53BB;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x662F;245&#xFF0C;&#x6CA1;&#x6709;&#x8FBE;&#x5230;&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x6570;&#x4E0A;&#x9650;256&#xFF0C;&#x5E94;&#x8BE5;&#x6CA1;&#x6709;&#x51FA;&#x73B0;1040&#x9519;&#x8BEF;&#xFF0C;&#x6BD4;&#x8F83;&#x7406;&#x60F3;&#x7684;&#x8BBE;&#x7F6E;&#x662F;&#xFF1A;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Max_used_connections / max_connections * 100% &#x2248; 85%</span><br></pre></td></tr></table></figure>

<p>&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#x5360;&#x4E0A;&#x9650;&#x8FDE;&#x63A5;&#x6570;&#x7684;85%&#x5DE6;&#x53F3;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x73B0;&#x6BD4;&#x4F8B;&#x5728;10%&#x4EE5;&#x4E0B;&#xFF0C;MySQL&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x4E0A;&#x7EBF;&#x5C31;&#x8BBE;&#x7F6E;&#x5F97;&#x8FC7;&#x9AD8;&#x4E86;&#x3002;</p>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/mysql/" rel="tag"><i class="fa fa-tag"></i> mysql</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2014/01/03/简单备份监控程序/" rel="next" title="简单备份监控程序">
                  <i class="fa fa-chevron-left"></i> 简单备份监控程序
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2014/03/21/Nginx报错处理/" rel="prev" title="Nginx报错处理">
                  Nginx报错处理 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="gitalk-container"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#概念"><span class="nav-number">1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参数"><span class="nav-number">2.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置"><span class="nav-number">3.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#slow-query-log"><span class="nav-number">3.1.</span> <span class="nav-text">slow_query_log</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slow-query-log-file"><span class="nav-number">3.2.</span> <span class="nav-text">slow_query_log_file</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#long-query-time"><span class="nav-number">3.3.</span> <span class="nav-text">long_query_time</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#log-output"><span class="nav-number">3.4.</span> <span class="nav-text">log_output</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#log-queries-not-using-indexes"><span class="nav-number">3.5.</span> <span class="nav-text">log-queries-not-using-indexes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#log-slow-admin-statements"><span class="nav-number">3.6.</span> <span class="nav-text">log_slow_admin_statements</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Slow-queries"><span class="nav-number">3.7.</span> <span class="nav-text">Slow_queries</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysqldumpslow工具"><span class="nav-number">4.</span> <span class="nav-text">mysqldumpslow工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXPLAIN分析查询"><span class="nav-number">5.</span> <span class="nav-text">EXPLAIN分析查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#EXPLAIN字段"><span class="nav-number">5.1.</span> <span class="nav-text">EXPLAIN字段</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#profiling分析查询"><span class="nav-number">6.</span> <span class="nav-text">profiling分析查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引及查询优化"><span class="nav-number">7.</span> <span class="nav-text">索引及查询优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#索引的类型"><span class="nav-number">7.1.</span> <span class="nav-text">索引的类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#单列索引和多列索引（复合索引）"><span class="nav-number">7.2.</span> <span class="nav-text">单列索引和多列索引（复合索引）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#多列索引"><span class="nav-number">7.2.1.</span> <span class="nav-text">多列索引</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#最左前缀"><span class="nav-number">7.2.2.</span> <span class="nav-text">最左前缀</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引主要的操作"><span class="nav-number">7.3.</span> <span class="nav-text">索引主要的操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#合理的建立索引的建议"><span class="nav-number">7.4.</span> <span class="nav-text">合理的建立索引的建议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#关于索引和写SQL语句时应当注意的一些琐碎建议和注意点"><span class="nav-number">7.5.</span> <span class="nav-text">关于索引和写SQL语句时应当注意的一些琐碎建议和注意点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Where条件"><span class="nav-number">7.6.</span> <span class="nav-text">Where条件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置优化"><span class="nav-number">8.</span> <span class="nav-text">配置优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#连接请求的变量："><span class="nav-number">8.1.</span> <span class="nav-text">连接请求的变量：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-max-connections"><span class="nav-number">8.1.1.</span> <span class="nav-text">1)     max_connections</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-back-log"><span class="nav-number">8.1.2.</span> <span class="nav-text">2)     back_log</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-interactive-timeout"><span class="nav-number">8.1.3.</span> <span class="nav-text">3)     interactive_timeout</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#缓冲区变量"><span class="nav-number">8.2.</span> <span class="nav-text">缓冲区变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#4-key-buffer-size"><span class="nav-number">8.2.1.</span> <span class="nav-text">4)     key_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-query-cache-size"><span class="nav-number">8.2.2.</span> <span class="nav-text">5)     query_cache_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-record-buffer-size"><span class="nav-number">8.2.3.</span> <span class="nav-text">6)    record_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-read-rnd-buffer-size"><span class="nav-number">8.2.4.</span> <span class="nav-text">7)     read_rnd_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-sort-buffer-size"><span class="nav-number">8.2.5.</span> <span class="nav-text">8)     sort_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#9-join-buffer-size"><span class="nav-number">8.2.6.</span> <span class="nav-text">9)     join_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-table-cache"><span class="nav-number">8.2.7.</span> <span class="nav-text">10)  table_cache</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-max-heap-table-size"><span class="nav-number">8.2.8.</span> <span class="nav-text">11)  max_heap_table_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#12-tmp-table-size"><span class="nav-number">8.2.9.</span> <span class="nav-text">12)  tmp_table_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#13-thread-cache-size"><span class="nav-number">8.2.10.</span> <span class="nav-text">13)  thread_cache_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#14-thread-concurrency"><span class="nav-number">8.2.11.</span> <span class="nav-text">14)  thread_concurrency</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#15-wait-timeout"><span class="nav-number">8.2.12.</span> <span class="nav-text">15)  wait_timeout</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置InnoDB的几个变量"><span class="nav-number">8.3.</span> <span class="nav-text">配置InnoDB的几个变量</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#innodb-buffer-pool-size"><span class="nav-number">8.3.1.</span> <span class="nav-text">innodb_buffer_pool_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#innodb-flush-log-at-trx-commit"><span class="nav-number">8.3.2.</span> <span class="nav-text">innodb_flush_log_at_trx_commit</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#innodb-log-buffer-size"><span class="nav-number">8.3.3.</span> <span class="nav-text">innodb_log_buffer_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#innodb-additional-mem-pool-size"><span class="nav-number">8.3.4.</span> <span class="nav-text">innodb_additional_mem_pool_size</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#innodb-thread-concurrency-8"><span class="nav-number">8.3.5.</span> <span class="nav-text">innodb_thread_concurrency=8</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置innodb-buffer-pool-size大小"><span class="nav-number">9.</span> <span class="nav-text">设置innodb_buffer_pool_size大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置max-connections大小"><span class="nav-number">10.</span> <span class="nav-text">设置max_connections大小</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.jpg"
      alt="csz">
  <p class="site-author-name" itemprop="name">csz</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">21</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/cszhi" title="GitHub &rarr; https://github.com/cszhi" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:cszhi@cszhi.com" title="E-Mail &rarr; mailto:cszhi@cszhi.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2009 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">csz</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">256k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">10:39</span>
</div>

        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  
    <span class="post-meta-divider">|</span>
  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/pjax/pjax.min.js?v=0.2.8"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var id = element.id || '';
    var src = element.src || '';
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (id !=='') {
      script.id = element.id;
    }
    if (src !== '') {
      script.src = src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  








  <script src="/js/local-search.js?v=7.4.0"></script>













    <div id="pjax">

  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'Iv1.f2f51728b92ca1b4# GitHub Application Client ID',
      clientSecret: '25c7533822c65ca85f007c4e7172b9f2b921ea30# GitHub Application Client Secret',
      repo: 'cszhi.github.io# Repository name to store issues',
      owner: 'cszhi# GitHub repo owner',
      admin: ['cszhi# GitHub repo owner and collaborators, only these guys can initialize gitHub issues'],
      id: '2838538a5073ec6d1559abde9ed255bf',
        language: 'zh-CN',
      
      distractionFreeMode: 'false'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

    </div>
</body>
</html>
